/*! plone-mosaic 3.0.0-alpha.7 */
"use strict";(self.webpackChunkplone_mosaic=self.webpackChunkplone_mosaic||[]).push([[60185],{60185:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});a(35666);var i=a(99269),o=a.n(i),n=a(7424),r=a(79277);a(41973);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */c=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",n=i.asyncIterator||"@@asyncIterator",r=i.toStringTag||"@@toStringTag";function l(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,a){return e[t]=a}}function d(e,t,a,i){var o=t&&t.prototype instanceof h?t:h,n=Object.create(o.prototype),r=new _(i||[]);return n._invoke=function(e,t,a){var i="suspendedStart";return function(o,n){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw n;return L()}for(a.method=o,a.arg=n;;){var r=a.delegate;if(r){var s=z(r,a);if(s){if(s===u)continue;return s}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===i)throw i="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);i="executing";var c=m(e,t,a);if("normal"===c.type){if(i=a.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(i="completed",a.method="throw",a.arg=c.arg)}}}(e,a,r),n}function m(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}e.wrap=d;var u={};function h(){}function f(){}function p(){}var v={};l(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(k([])));y&&y!==t&&a.call(y,o)&&(v=y);var w=p.prototype=h.prototype=Object.create(v);function C(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(o,n,r,c){var l=m(e[o],e,n);if("throw"!==l.type){var d=l.arg,u=d.value;return u&&"object"==s(u)&&a.call(u,"__await")?t.resolve(u.__await).then((function(e){i("next",e,r,c)}),(function(e){i("throw",e,r,c)})):t.resolve(u).then((function(e){d.value=e,r(d)}),(function(e){return i("throw",e,r,c)}))}c(l.arg)}var o;this._invoke=function(e,a){function n(){return new t((function(t,o){i(e,a,t,o)}))}return o=o?o.then(n,n):n()}}function z(e,t){var a=e.iterator[t.method];if(void 0===a){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,z(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var i=m(a,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,u;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,n=function t(){for(;++i<e.length;)if(a.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:L}}function L(){return{value:void 0,done:!0}}return f.prototype=p,l(w,"constructor",p),l(p,"constructor",f),f.displayName=l(p,r,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,r,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},C(b.prototype),l(b.prototype,n,(function(){return this})),e.AsyncIterator=b,e.async=function(t,a,i,o,n){void 0===n&&(n=Promise);var r=new b(d(t,a,i,o),n);return e.isGeneratorFunction(a)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},C(w),l(w,r,"Generator"),l(w,o,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var i=t.pop();if(i in e)return a.value=i,a.done=!1,a}return a.done=!0,a}},e.values=k,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(a,i){return r.type="throw",r.arg=e,t.next=a,i&&(t.method="next",t.arg=void 0),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var n=this.tryEntries[o],r=n.completion;if("root"===n.tryLoc)return i("end");if(n.tryLoc<=this.prev){var s=a.call(n,"catchLoc"),c=a.call(n,"finallyLoc");if(s&&c){if(this.prev<n.catchLoc)return i(n.catchLoc,!0);if(this.prev<n.finallyLoc)return i(n.finallyLoc)}else if(s){if(this.prev<n.catchLoc)return i(n.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return i(n.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&a.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var n=o;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var r=n?n.completion:{};return r.type=e,r.arg=t,n?(this.method="next",this.next=n.finallyLoc,u):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),x(a),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var i=a.completion;if("throw"===i.type){var o=i.arg;x(a)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:k(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),u}},e}function l(e,t,a,i,o,n,r){try{var s=e[n](r),c=s.value}catch(e){return void a(e)}s.done?t(c):Promise.resolve(c).then(i,o)}function d(e){return function(){var t=this,a=arguments;return new Promise((function(i,o){var n=e.apply(t,a);function r(e){l(n,i,o,r,s,"next",e)}function s(e){l(n,i,o,r,s,"throw",e)}r(void 0)}))}}function m(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return r=e.done,e},e:function(e){s=!0,n=e},f:function(){try{r||null==a.return||a.return()}finally{if(s)throw n}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function h(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.Z.getLogger("pat-mosaic/layout");var f=function(){function e(t){var a,i,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o={widthClasses:["col","col-1","col-2","col-3","col-4","col-5","col-6","col-7","col-8","col-9","col-10","col-11","col-12"],resizeClasses:["mosaic-resize-1","mosaic-resize-2","mosaic-resize-3","mosaic-resize-4","mosaic-resize-5","mosaic-resize-6","mosaic-resize-7","mosaic-resize-8","mosaic-resize-9","mosaic-resize-10","mosaic-resize-11","mosaic-resize-12"],resizeHandleClasses:["mosaic-resize-handle-1","mosaic-resize-handle-2","mosaic-resize-handle-3","mosaic-resize-handle-4","mosaic-resize-handle-5","mosaic-resize-handle-6","mosaic-resize-handle-7","mosaic-resize-handle-8","mosaic-resize-handle-9","mosaic-resize-handle-10","mosaic-resize-handle-11","mosaic-resize-handle-12"]},(i="layout")in(a=this)?Object.defineProperty(a,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[i]=o,this.mosaic=t}var t,a,i,n,s;return t=e,a=[{key:"getWidthClass",value:function(e){var t,a=m(this.layout.widthClasses);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(o()(e).hasClass(i))return i}}catch(e){a.e(e)}finally{a.f()}return this.layout.widthClasses[0]}},{key:"getResizeHandleClassId",value:function(e){for(var t=0;t<this.layout.resizeHandleClasses.length;t++)if(o()(e).hasClass(this.layout.resizeHandleClasses[t]))return t;return 1}},{key:"addAppTile",value:function(e,t){var a,i=this;i.mosaic.overlay.modal.$modal&&i.mosaic.overlay.modal.hide(),o().ajax({type:"GET",url:t,success:(a=d(c().mark((function a(o){return c().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=i.mosaic.getDomTreeFromHtml(o),i.mosaic.addHeadTags(t,o),a.next=4,i.addTile(e,o.find(".temp_body_tag").html(),t);case 4:case"end":return a.stop()}}),a)}))),function(e){return a.apply(this,arguments)})})}},{key:"addAppTileHTML",value:(s=d(c().mark((function e(t,a,i){var o,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(n=this).mosaic.getDomTreeFromHtml(a),n.mosaic.addHeadTags(i,o),e.next=5,n.addTile(t,o.find(".temp_body_tag").html(),i);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,a){return s.apply(this,arguments)})},{key:"editAppTile",value:function(e){var t=this;t.mosaic.overlay.close(),window.parent.focus(),o().ajax({type:"GET",url:e,success:function(a){a=t.mosaic.getDomTreeFromHtml(a),t.mosaic.removeHeadTags(e),t.mosaic.addHeadTags(e,a);var i=o()(".mosaic-selected-tile .mosaic-tile-content",t.mosaic.document);i.html(a.find(".temp_body_tag").html()),i.attr("data-tileUrl",e.replace(/&/gim,"&amp;"))}})}},{key:"addTile",value:(n=d(c().mark((function e(t,a,i){var n,s,l,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=this).mosaic.panels.addClass("mosaic-panel-dragging mosaic-panel-dragging-new"),o()(n.mosaic.panels.get(0)).append(o()(n.mosaic.document.createElement("div")).addClass("mosaic-grid-row").append(o()(n.mosaic.document.createElement("div")).addClass("mosaic-grid-cell col").append(o()(n.mosaic.document.createElement("div")).addClass("movable removable mosaic-tile mosaic-"+t+"-tile").append(o()(n.mosaic.document.createElement("div")).addClass("mosaic-tile-content").attr("data-tileUrl",i&&i.replace(/&/gim,"&amp;")).html(a)).addClass("mosaic-helper-tile mosaic-helper-tile-new mosaic-original-tile")))),s=n.mosaic.panels.find(".mosaic-helper-tile-new"),l=0,n.mosaic.panels.each((function(){o()(this).width()>l&&(l=o()(this).width())})),s.width()<l/4?s.width(l/4):s.width(s.width()),d=new r.Z(n.mosaic,s),e.next=10,d.initialize();case 10:d.cacheHtml(),d.scanRegistry();case 12:case"end":return e.stop()}}),e,this)}))),function(e,t,a){return n.apply(this,arguments)})},{key:"getDefaultValue",value:function(e){var t,a;if("IDublinCore-title"===e.name?(t='<h1 class="documentFirstHeading">',a="</h1>"):"IDublinCore-description"===e.name?(t='<p class="documentDescription">',a="</p>"):(t="<div>",a="</div>"),"field"===e.tile_type)switch(e.widget){case"z3c.form.browser.text.TextWidget":case"z3c.form.browser.text.TextFieldWidget":var i=o()("#"+e.id,this.mosaic.document).find("input").attr("value");return"".concat(t).concat(i).concat(a);case"z3c.form.browser.textarea.TextAreaWidget":case"z3c.form.browser.textarea.TextAreaFieldWidget":case"z3c.form.browser.textlines.TextLinesWidget":case"z3c.form.browser.textlines.TextLinesFieldWidget":var n=o()("#"+e.id,this.mosaic.document).find("textarea").val().replace("\\n","<br/>");return"".concat(t).concat(n).concat(a);case"plone.app.z3cform.widget.RichTextFieldWidget":case"plone.app.z3cform.wysiwyg.widget.WysiwygWidget":case"plone.app.z3cform.wysiwyg.widget.WysiwygFieldWidget":case"plone.app.widgets.dx.RichTextWidget":return o()("#"+e.id).find("textarea").val();default:return'<div class="discreet">Placeholder for field:<br/><b>'+e.label+"</b></div>"}return e.default_value}},{key:"getPageContent",value:function(e){var t,a=function t(a){var i="";return!1===o()(a).hasClass("mosaic-empty-row")&&o()(a).find(".mosaic-tile").length>=0&&(n=o()(a).attr("class"),i+='      <div class="'+n+'">\n',o()(a).children(".mosaic-grid-cell").each((function(){i+='        <div class="'+o()(this).attr("class")+'">\n',o()(this).children().each((function(){o()(this).hasClass("mosaic-tile")?i+=o()(this).data("mosaic-tile").getHtmlBody(e):o()(this).hasClass("mosaic-innergrid-row")&&(i+=t(this))})),i+="        </div>\n"})),i+="      </div>\n"),i},i="",n="";return i+="  <body>\n",o()("[data-panel]",this.mosaic.document).each((function(){i+='    <div data-panel="'+o()(this).data("panel")+'"',i+='         data-max-columns="'+o()(this).data("max-columns")+'">\n',o()(this).children().each((function(){o()(this).hasClass("mosaic-grid-row")&&(i+=a(this))})),i+="    </div>\n"})),i+="  </body>\n",t='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" data-layout="'+this.mosaic.options.layout+'">\n',t+=i,t+="</html>\n"}},{key:"saveLayoutToForm",value:function(){var e=o()("#form-widgets-ILayoutAware-customContentLayout, [name='form.widgets.ILayoutAware.customContentLayout']");this.mosaic.hasContentLayout?e.val(""):e.val(this.getPageContent())}},{key:"init_events",value:function(){var e=this;o()(e.mosaic.document).off("keydown").on("keydown",(function(t){if(9===t.keyCode){var a,i=m(e.mosaic.document.querySelectorAll(".mosaic-selected-tile"));try{for(i.s();!(a=i.n()).done;)a.value["mosaic-tile"].blur()}catch(e){i.e(e)}finally{i.f()}var n=document.activeElement.closest(".mosaic-tile");n&&n["mosaic-tile"].focus()}if(18===t.keyCode)if(o()(".mosaic-panel",e.mosaic.document).hasClass("mosaic-advanced"))o()(".mosaic-panel",e.mosaic.document).removeClass("mosaic-advanced");else{var r=new Date;o()(".mosaic-panel",e.mosaic.document).addClass("mosaic-advanced"),o()(".mosaic-panel",e.mosaic.document).data("advanced-enabled",r.getTime())}if(17===t.keyCode&&o()(".mosaic-panel",e.mosaic.document).addClass("inner-subcolumn"),27===t.keyCode){var s=o()(".mosaic-original-tile",e.mosaic.document);s.length>0?s.each((function(){o()(this).addClass("mosaic-drag-cancel"),o()(this).hasClass("mosaic-helper-tile-new")?o()(document).trigger("mousedown"):o()(document).trigger("mouseup")})):o()(".mosaic-selected-tile",e.mosaic.document).each((function(){o()(this).trigger("blur")})),o()(".mosaic-resize-handle-helper",e.mosaic.document).each((function(){o()(this).parents("[data-panel]").removeClass("mosaic-panel-resizing"),o()(this).parent().removeClass("mosaic-row-resizing"),o()(this).parent().children(".mosaic-resize-placeholder").remove(),o()(this).remove()})),e.mosaic.overlay.modal.$modal&&e.mosaic.overlay.modal.hide()}})),o()(e.mosaic.document).off("keyup").on("keyup",(function(t){if(18===t.keyCode){var a=new Date,i=o()(".mosaic-panel",e.mosaic.document).data("advanced-enabled");a.getTime()-i>400&&o()(".mosaic-panel",e.mosaic.document).removeClass("mosaic-advanced")}17===t.keyCode&&o()(".mosaic-panel",e.mosaic.document).removeClass("inner-subcolumn")})),o()(e.mosaic.document).off("mousedown").on("mousedown",(function(t){var a;t.target?a=t.target:t.srcElement&&(a=t.srcElement);var i=o()(".mosaic-helper-tile-new",e.mosaic.document);i.length>0&&i.each((function(){o()(this).mosaicHandleDragEnd()})),o()(a).parents(".mce-content-body, .tox, .modal-wrapper").length>0||0===o()(a).parents(".mosaic-tile").length&&0===o()(a).parents(".mosaic-toolbar").length&&(e.mosaic.document.querySelectorAll(".mosaic-selected-tile").forEach((function(e){e.classList.remove("mosaic-selected-tile"),o()(e).data("mosaic-tile").blur()})),e.mosaic.toolbar.SelectedTileChange())}));var t=function(t){o()(".mosaic-helper-tile-new",e.mosaic.document).each((function(){var e=o()(this).parent().offset();o()(this).css("top",t.pageY+3-e.top),o()(this).css("left",t.pageX+3-e.left)})),o()(".mosaic-resize-handle-helper",e.mosaic.document).each((function(){var a,i=o()(this),n=i.parent(),r=i.data("resize_handle_index"),s=parseFloat(t.pageX-n.offset().left-4),c=Math.round(s/i.data("row_width")*100),l=8,d=8;v().forEach((function(e){(a=Math.abs(e-c))<d&&(l=e,d=a)}));for(var m=function(e){for(var t=v(),a=0;a<t.length;a++)if(e===t[a])return a+1;return 12}(l),u=i.data("column_sizes"),h=0,f=0,p=0;p<u.length;p++)p<r&&(h+=u[p]?u[p]:2),p>r&&(f+=u[p]?u[p]:2);var y=m-h,w=12-h-f;if(y=y>w?w:y<1?1:y,i.data("nr_of_columns")>0){var C=0,b=!1,z=e.layout.resizeClasses.join(" "),E=e.layout.widthClasses.join(" ");n.children(".mosaic-resize-placeholder").each((function(e){if(e===r){u[e]=y;var t=g(y);o()(this).removeClass(E).addClass(t).find(".info").html(y),b=!0}o()(this).removeClass(z).addClass("mosaic-resize-".concat(C)),C+=u[e],b&&(o()(".mosaic-resize-handle-helper",n).removeClass(z).addClass("mosaic-resize-".concat(C)),b=!1)})),o()(this).data("column_sizes",u)}}))};o()(e.mosaic.document).off("mousemove").on("mousemove",t),o()(e.mosaic.document).off("dragover").on("dragover",t),o()(e.mosaic.document).off("mouseup").on("mouseup",(function(){o()(".mosaic-resize-handle-helper",e.mosaic.document).each((function(){var t=o()(this).data("resize_handle_index");o()(this).parent().parent().mosaicCleanupRow();var a=o()(this).parents("[data-panel]"),i=o()(this).data("column_sizes");o()(this).parent().children(".mosaic-grid-cell").each((function(a){o()(this).removeClass(e.layout.widthClasses.join(" ")).addClass(g(i[a])),o()(this).hasClass("col")||a!==t||o()(this).children(".mosaic-tile").first().children(".mosaic-tile-side-tools").each((function(){var t=o()(this);t.children(".mosaic-tile-label.reset").remove(),t.append(o()(e.mosaic.document.createElement("div")).addClass("mosaic-tile-label reset").append(p(t,i[a])))}))})),a.removeClass("mosaic-panel-resizing"),o()(this).parent().removeClass("mosaic-row-resizing"),o()(this).parent().children(".mosaic-resize-placeholder").remove(),o()(this).parent().mosaicSetResizeHandles();var n=a.find(".mosaic-selected-tile");n.length>0&&n.data("mosaic-tile").select(),o()(this).remove()}))}));var a=function(t){if(!1!==o()(this).parents("[data-panel]").hasClass("mosaic-panel-dragging")&&(o()(".mosaic-selected-divider",e.mosaic.document).removeClass("mosaic-selected-divider"),!1===o()(this).hasClass("mosaic-original-tile")&&!1===o()(this).hasClass("mosaic-tile-align-left")&&!1===o()(this).hasClass("mosaic-tile-align-right"))){var a=o()(this).mosaicGetDirection(t),i=o()(this).children(".mosaic-divider-"+a);if("left"===a||"right"===a){var n=i.parent().parent().parent();if(n.children(".mosaic-grid-cell").filter((function(e,t){return 0===o()(t).find(".mosaic-original-tile").length})).length>=o()(".mosaic-panel").data("max-columns"))return;n.children(".mosaic-grid-cell").length>1?(i.height(n.height()+5),i.css("top",n.offset().top-i.parent().offset().top-5)):(i.height(i.parent().height()+5),i.css("top",-5))}i.addClass("mosaic-selected-divider")}};o()(e.mosaic.document).off("mousemove",".mosaic-tile").on("mousemove",".mosaic-tile",a),o()(e.mosaic.document).off("dragover",".mosaic-tile").on("dragover",".mosaic-tile",a),o()(e.mosaic.document).off("click",".mosaic-tile").on("click",".mosaic-tile",(function(t){0===o()(".mosaic-helper-tile-new",e.mosaic.document).length&&o()(this).data("mosaic-tile")&&o()(this).data("mosaic-tile").select()})),o()(e.mosaic.document).on("dblclick",".mosaic-grid-row",(function(e){var t=o()(e.target);if(t.parents("[data-panel]").hasClass("mosaic-advanced")&&t.hasClass("mosaic-grid-row")){if(o()(t).find(".mosaic-set-custom-css").length>0)return;var a=[];o().each(t.attr("class").split(" "),(function(){void 0!==this&&"mosaic-grid-row"!==this&&"mosaic-innergrid-row"!==this&&a.push(this)}));var i=o()("<input type='text' id='custom-css-input-box'></input>").val(a.join(" ")),n=o()("<div></div>").addClass("mosaic-set-custom-css").append(o()("<label>Custom CSS for this row:</label>")).append(i);t.append(n)}})),o()(e.mosaic.document).on("click",(function(e){"custom-css-input-box"!==o()(e.target).attr("id")&&o().each(o()("div.mosaic-set-custom-css"),(function(){var e=o()(this).parent(),t="mosaic-grid-row";e.hasClass("mosaic-innergrid-row")&&(t="mosaic-grid-row mosaic-innergrid-row"),t+=" "+o()(this).find("input#custom-css-input-box").val(),e.attr("class",t),o()(this).remove()}))}))}},{key:"initialize_panels",value:function(){var e=this;e.initJQueryHelpers(),e.init_events();for(var t=e.mosaic.panels.length,a=0;a<t;a++){var i=o()(e.mosaic.panels[a]);if(i.find(".mosaic-tile").each(d(c().mark((function t(){var a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new r.Z(e.mosaic,this),t.next=3,a.initialize();case 3:case"end":return t.stop()}}),t,this)})))),i.find(".mosaic-tile").mosaicAddDrag(),i.mosaicAddEmptyRows(),i.children(".mosaic-grid-row").mosaicSetResizeHandles(),a===t-1){var n=0,s=0;e.mosaic.panels.each((function(e){o()(this).width()>n&&(n=o()(this).width(),s=e)}));var l=e.mosaic.panels.eq(s).find(".mosaic-tile:first");l.length>0&&l.data("mosaic-tile").select()}i.find(".mosaic-innergrid-row").each((function(){o()(this).mosaicAddMouseMoveInnergridRow(),o()(this).mosaicSetResizeHandles();var t=o()(this);["top","bottom"].forEach((function(a,i){t.append(o()(e.mosaic.document.createElement("div")).addClass("mosaic-divider mosaic-divider-"+a))}))}))}}},{key:"initJQueryHelpers",value:function(){var e=this,t=e.mosaic.document;o().fn.mosaicAddMouseMoveEmptyRow=function(){return this.each((function(){o()(this).on("mousemove",(function(){o()(this).parents("[data-panel]").hasClass("mosaic-panel-dragging")&&(o()(".mosaic-selected-divider",t).removeClass("mosaic-selected-divider"),o()(this).children("div").addClass("mosaic-selected-divider"))}))}))},o().fn.mosaicAddMouseMoveInnergridRow=function(){return this.each((function(){o()(this).mousemove((function(e){if(o()(this).parents("[data-panel]").hasClass("mosaic-panel-dragging")){o()(".mosaic-selected-divider",t).removeClass("mosaic-selected-divider");var a=o()(this).mosaicGetDirection(e);o()(this).children(".mosaic-divider-"+a).addClass("mosaic-selected-divider")}}))}))},o().fn.mosaicAddEmptyRows=function(){return this.each((function(){o()(this).find(".mosaic-grid-row:not(.mosaic-innergrid-row)").each((function(){o()(this).before(o()(t.createElement("div")).addClass("mosaic-grid-row mosaic-empty-row").append(o()(t.createElement("div")).addClass("mosaic-grid-cell col").append(o()(t.createElement("div")).append(o()(t.createElement("div")).addClass("mosaic-tile-outer-border")))).mosaicAddMouseMoveEmptyRow()),0===o()(this).nextAll(".mosaic-grid-row").length&&o()(this).after(o()(t.createElement("div")).addClass("mosaic-grid-row mosaic-empty-row").append(o()(t.createElement("div")).addClass("mosaic-grid-cell col").append(o()(t.createElement("div")).append(o()(t.createElement("div")).addClass("mosaic-tile-outer-border")))).mosaicAddMouseMoveEmptyRow())})),0===o()(this).find(".mosaic-grid-row:not(.mosaic-innergrid-row)").length&&o()(this).append(o()(t.createElement("div")).addClass("mosaic-grid-row mosaic-empty-row").append(o()(t.createElement("div")).addClass("mosaic-grid-cell col").append(o()(t.createElement("div")).append(o()(t.createElement("div")).addClass("mosaic-tile-outer-border")))).mosaicAddMouseMoveEmptyRow())}))},o().fn.mosaicAddDrag=function(){return this.each((function(){var a=o()(this),i=function(e){var a=o()(".mosaic-helper-tile",t),i=a.parents("[data-panel]").offset();i&&(a.css("top",e.pageY+3-i.top),a.css("left",e.pageX+3-i.left))},n=function e(){var a=o()(".mosaic-helper-tile",t);o()(t).off("mousemove",i).off("mouseup",e),a.mosaicHandleDragEnd(),a.remove()};return a.each((function(){a.find("div.mosaic-drag-handle").off("mousedown").on("mousedown",(function(a){var r=a.pageX,s=a.pageY,c=function a(c){if(Math.max(Math.abs(r-c.pageX),Math.abs(s-c.pageY))>=1){e.mosaic.panels.addClass("mosaic-panel-dragging"),o()(".mosaic-selected-tile",t).removeClass("mosaic-selected-tile").children(".mosaic-tile-content").trigger("blur");var l=o()(c.target).parents(".mosaic-tile");l.addClass("mosaic-original-tile");var d=l.clone(!0);d.css({width:l.width(),"max-height":"50%",position:"absolute",opacity:.5}).addClass("mosaic-helper-tile"),l.parents("[data-panel]").append(d),o()(t).on("mousemove",i),o()(t).on("mouseup",n),o()(t).off("mousemove",a)}};o()(t).on("mousemove",c),o()(t).on("mouseup",(function(){o()(t).off("mousemove",c)}))}))}))}))},o().fn.mosaicHandleDragEnd=function(){var a=o()(this).parents("[data-panel]");e.mosaic.panels.removeClass("mosaic-panel-dragging mosaic-panel-dragging-new");for(var i=o()(".mosaic-selected-divider",t),n=i.parent(),r="",s=0,c=["top","bottom","left","right"];s<c.length;s++){var l=c[s];i.hasClass("mosaic-divider-"+l)&&(r=l)}i.removeClass("mosaic-selected-divider");var d=o()(".mosaic-helper-tile-new",t).length>0,m=(h=o()(".mosaic-original-tile",t)).closest(".mosaic-grid-row");(0===i.length||n.hasClass("mosaic-helper-tile"))&&h.addClass("mosaic-drag-cancel");var u=function(e){e.removeClass("mosaic-drag-cancel"),e.removeClass("mosaic-original-tile mosaic-helper-tile mosaic-helper-tile-new mosaic-tile-align-right mosaic-tile-align-left"),e.css({width:"",left:"",top:""}),d||e.addClass("mosaic-new-tile")};if(h.hasClass("mosaic-drag-cancel")||!1===n.hasClass("mosaic-tile")&&!1===n.hasClass("mosaic-innergrid-row")&&!1===n.hasClass("mosaic-empty-row")||n.parent().parent().children(".mosaic-grid-cell").length>=a.data("max-columns")&&("left"===r||"right"===r))u(h);else if(n.hasClass("mosaic-empty-row"))n.removeClass("mosaic-empty-row").attr("class",h.parents(".mosaic-grid-row").first().attr("class")).off("mousemove"),n.children(".mosaic-grid-cell").children("div").remove(),u(h),n.children(".mosaic-grid-cell").append(h);else{if(u(h),a.hasClass("inner-subcolumn"))for(var h=o()(t.createElement("div")).addClass("mosaic-grid-row mosaic-innergrid-row").append(o()(t.createElement("div")).addClass("mosaic-grid-cell col").append(o()(t.createElement("div")).append(o()(t.createElement("div")).addClass("mosaic-innergrid-outer-border"))).append(h)).mosaicAddMouseMoveInnergridRow(),f=0,p=["top","bottom"];f<p.length;f++){var v=p[f];h.append(o()(t.createElement("div")).addClass("mosaic-divider mosaic-divider-"+v))}if("top"===r)n.before(h);else if("bottom"===r)n.after(h);else if("left"===r||"right"===r){var g=n.parent(),y=g.parent();if(1===y.children(".mosaic-grid-cell").length.length){var w=n.prevAll();w.length>0&&(y.before(o()(t.createElement("div")).addClass("mosaic-grid-row").append(o()(t.createElement("div")).addClass("mosaic-grid-cell col").append(o()(w.get().reverse()).clone(!0).mosaicAddDrag()))),w.remove());var C=n.nextAll();C.length>0&&(y.after(o()(t.createElement("div")).addClass("mosaic-grid-row").append(o()(t.createElement("div")).addClass("mosaic-grid-cell col").append(C.clone(!0).mosaicAddDrag()))),C.remove()),g.removeClass(e.layout.widthClasses.join(" ")).addClass("col"),"left"===r?n.parent().before(o()(t.createElement("div")).addClass("mosaic-grid-cell col").append(h)):n.parent().after(o()(t.createElement("div")).addClass("mosaic-grid-cell col").append(h)),y.mosaicSetResizeHandles()}else"left"===r?g.before(o()(t.createElement("div")).addClass("mosaic-grid-cell").append(h)):g.after(o()(t.createElement("div")).addClass("mosaic-grid-cell").append(h)),y.mosaicSetColumnSizes(),y.mosaicSetResizeHandles()}}e.mosaic.panels.find(".mosaic-grid-row:not(:has(.mosaic-tile))").remove(),e.mosaic.panels.find(".mosaic-empty-row").remove(),m.mosaicCleanupRow(),e.mosaic.panels.mosaicAddEmptyRows(),d&&h.length>0&&(h.mosaicAddDrag(),h.data("mosaic-tile").initializeContent(),h.data("mosaic-tile").focus())},o().fn.mosaicSetColumnSizes=function(){return this.each((function(){var t=[],a=o()(this).children(".mosaic-grid-cell"),i=a.length,n=e.layout.widthClasses.join(" ");a.each((function(e){o()(this).removeClass(n);for(var a=Math.floor(12/i),r=12-a*(i-1),s=0;s<i;s++)s===i-1&&(a=r),e===s&&(t.push(a),o()(this).addClass("col"))})),o()(this).data("column_sizes",t)}))},o().fn.mosaicSetResizeHandles=function(){return this.each((function(){o()(this).children(".mosaic-resize-handle").remove();var a=o()(this).children(".mosaic-grid-cell"),i=a.length;if(i<=12){for(var n=[],r=0,s=0,c=0;c<i;c++){var l=y(e.getWidthClass(a[c]));n.push(l),s+=l,0===l&&(r+=1)}var d=0;r&&(d=(12-s)/r);var m=0;l=0;for(var u=0;u<i;u++)m+=l=n[u]?n[u]:d,o()(this).append(o()(t.createElement("div")).addClass("mosaic-resize-handle mosaic-resize-handle-".concat(u+1)+" mosaic-resize-".concat(m)).data("resize_handle_index",u)),o()(a[u]).data("col_size",l)}o()(this).children(".mosaic-resize-handle").off("mousedown").on("mousedown",(function(){var a=o()(this).parent(),i=a.children(".mosaic-grid-cell"),n=i.length;if(!(n>12)){var r=0,s=[];i.each((function(e){var i=o()(this).data("col_size");s.push(i);var n=o()(t.createElement("div")).addClass("mosaic-resize-placeholder col-".concat(i," mosaic-resize-").concat(r)).append(o()(t.createElement("div")).addClass("mosaic-resize-placeholder-inner-border").append(o()(t.createElement("div")).addClass("info").html(i)));a.append(n),r+=i}));var c=e.getResizeHandleClassId(this);return a.append(o()(t.createElement("div")).addClass("mosaic-resize-handle mosaic-resize-handle-helper").addClass("mosaic-resize-".concat(s[c])).data("row_width",a.width()).data("nr_of_columns",n).data("column_sizes",s).data("resize_handle_index",c)),o()(this).parents("[data-panel]").addClass("mosaic-panel-resizing"),a.addClass("mosaic-row-resizing"),o()(".mosaic-selected-tile",t).children(".mosaic-tile-content").trigger("blur"),!1}}))}))},o().fn.mosaicCleanupRow=function(){return this.each((function(){var e=o()(this);if(e.children(".mosaic-grid-cell").each((function(){0===o()(this).children().length&&(o()(this).remove(),e.mosaicSetColumnSizes())})),0===e.find(".mosaic-tile").length){var t=e;if(e.nextAll(".mosaic-grid-row").length>0)e=e.next(".mosaic-grid-row");else{if(!(e.prevAll(".mosaic-grid-row").length>0))return void e.remove();e=e.prev(".mosaic-grid-row")}t.remove()}e.mosaicSetResizeHandles()}))},o().fn.mosaicGetDirection=function(e){var t=parseFloat(o()(this).width()),a=parseFloat(o()(this).height()),i=parseFloat(e.pageX-o()(this).offset().left-t/2),n=parseFloat(e.pageY-o()(this).offset().top-a/2),r=t/2,s=a/2;return i<0?n<0?i/n<-1*r/(-1*s)?"top":"left":i/n<-1*r/s?"left":"bottom":n<0?i/n<1*r/(-1*s)?"right":"top":i/n<r/s?"bottom":"right"}}}],a&&h(t.prototype,a),i&&h(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),p=function(e,t){var a=document.createElement("a"),i=void 0===t?"":" ("+t+")";return a.href="javascript:",a.textContent="Reset"+i,o()(a).on("click",{el:e},(function(e){e.preventDefault(),e.data.el.parent().parent().removeClass("col-1 col-2 col-3 col-4 col-5 col-6 col-7 col-8 col-9 col-10 col-11 col-12").addClass("col"),e.data.el.parent().parent().parent().mosaicSetResizeHandles(),o()(e.target).parent().remove()})),a};function v(){for(var e=[],t=0;t<99;)e.push(Math.round(t+=8.333333333333334));return e}function g(e){return e?"col-"+e:"col"}function y(e,t){return t=t||"col-",parseInt(e.replace(t,""))||0}}}]);
//# sourceMappingURL=60185.00a40b843dd477dc8f1a.min.js.map