(self.webpackChunkPaddleLabel_Frontend=self.webpackChunkPaddleLabel_Frontend||[]).push([[580],{38619:function(b){b.exports={modal:"modal___2aO7U"}},41180:function(b){b.exports={ppcard:"ppcard___27hGd",title:"title___22R8f"}},48627:function(b){b.exports={container:"container___2RXc3"}},26389:function(b){b.exports={modal:"modal___2gJ6d"}},44943:function(){},31982:function(b,x,e){"use strict";var S=e(89032),E=e(15746),L=e(11849),d=e(13062),j=e(71230),R=e(11700),i=e(67294),p=e(41180),K=e.n(p),w=function(g){return i.createElement("div",{className:K().ppcard,style:g.style,hidden:g.hidden},i.createElement(j.Z,{className:K().titleRow,style:{display:g.title?void 0:"none"}},i.createElement(R.Z,{className:K().title},g.title)),i.createElement(j.Z,{style:{marginTop:26}},i.createElement(E.Z,{span:24,style:(0,L.Z)({paddingLeft:30,paddingRight:30,textAlign:"center"},g.innerStyle)},g.children)))};x.Z=w},11428:function(b,x,e){"use strict";var S=e(67294),E=e(48627),L=e.n(E),d=function(R){return S.createElement("div",{className:"".concat(L().container),style:{backgroundImage:"url(./pics/background.png)"}},R.children)};x.Z=d},35261:function(b,x,e){"use strict";var S=e(71194),E=e(48889),L=e(49111),d=e(19650),j=e(88983),R=e(47933),i=e(47673),p=e(74485),K=e(34792),w=e(48086),M=e(57663),g=e(71577),k=e(9715),T=e(71257),a=e(2824),s=e(67294),P=e(26389),c=e.n(P),_=e(83721),W=e(36505),q=function(A){var X,V,Y,ee=(0,_.Ad)("component.PPExportModal"),D=(0,W.I)("component.PPExportModal"),G=(0,s.useState)(!1),te=(0,a.Z)(G,2),r=te[0],u=te[1],v=(0,s.useState)(!1),l=(0,a.Z)(v,2),o=l[0],t=l[1],Z=T.Z.useForm(),h=(0,a.Z)(Z,1),B=h[0],O=(0,_.os)((X=A.project)===null||X===void 0||(V=X.taskCategory)===null||V===void 0?void 0:V.name),N=O&&(Y=_.ux[O])!==null&&Y!==void 0&&Y.labelFormats?Object.keys(_.ux[O].labelFormats):[],y=(0,s.useState)(),J=(0,a.Z)(y,2),f=J[0],H=J[1];return s.createElement("span",{hidden:A.visible==!1},s.createElement(g.Z,{type:"primary",onClick:function(){return t(!0)}},D("title")),s.createElement(E.Z,{className:c().modal,title:D("title"),visible:o,onCancel:function(){return t(!1)},footer:null},s.createElement(T.Z,{form:B,name:"basic",labelCol:{span:6},wrapperCol:{span:16},initialValues:{remember:!1},onFinish:function(n){console.log("values",n),u(!0),(0,_.Tr)(A.project.projectId,n.path,n.labelFormat).then(function(){w.default.success(D("exportSuccess")),t(!1)}).catch(function(m){console.log(m)}).finally(function(){u(!1)})},autoComplete:"off"},s.createElement(T.Z.Item,{label:ee("path"),name:"path",rules:[{required:!0,message:D("nullPath")}]},s.createElement(p.Z,null)),s.createElement(T.Z.Item,{name:"labelFormat",label:s.createElement("p",null,D("labelFormat")," "),labelCol:{span:6},wrapperCol:{span:16},rules:[{required:!0,message:D("nullLabelFormat")}],style:{fontSize:"1.5rem"}},s.createElement(R.ZP.Group,{size:"large",style:{height:"3.13rem"},onChange:function(){H(B.getFieldValue("labelFormat"))}},N.map(function(C){return s.createElement(R.ZP,{key:C,value:C},D((0,_.os)(C),"global.labelFormat"))}))),s.createElement(T.Z.Item,{name:"segMaskType",label:ee("segMaskType","component.PPCreater"),labelCol:{span:6},wrapperCol:{span:16},style:{fontSize:"1.5rem",display:f=="mask"&&O=="semanticSegmentation"?void 0:"none"}},s.createElement(R.ZP.Group,{size:"large",style:{height:"3.13rem"}},["pesudo","grayscale"].map(function(C){return s.createElement(R.ZP,{key:C,value:C},D(C,"global.segMaskType"))}))),s.createElement(T.Z.Item,{wrapperCol:{offset:8,span:16}},s.createElement(d.Z,null,s.createElement(g.Z,{onClick:function(){t(!1),B.resetFields()}},D("cancel","global")),s.createElement(g.Z,{type:"primary",htmlType:"submit",loading:r},D("export")))))))};x.Z=q},65732:function(b,x,e){"use strict";e.r(x),e.d(x,{default:function(){return r}});var S=e(47673),E=e(74485),L=e(57663),d=e(71577),j=e(11849),R=e(39428),i=e(34792),p=e(48086),K=e(3182),w=e(9715),M=e(71257),g=e(2824),k=e(43358),T=e(42239),a=e(67294),s=e(48971),P=e(11428),c=e(31982),_=e(37071),W=e(83721),q=e(71194),Q=e(48889),A=e(49111),X=e(19650),V=e(38619),Y=e.n(V),ee=function(v){var l=(0,s.YB)(),o=(0,a.useState)(!1),t=(0,g.Z)(o,2),Z=t[0],h=t[1],B=l.formatMessage({id:"component.PPCreater.cancel"}),O=M.Z.useForm(),N=(0,g.Z)(O,1),y=N[0];function J(){var f=v.project.otherSettings;return f!=null&&f.perviousModel&&f!==null&&f!==void 0&&f.models&&f!==null&&f!==void 0&&f.models[f==null?void 0:f.perviousModel]?!0:(p.default.error("Please set and save ML settings first!"),!1)}return a.createElement("span",{hidden:v.visible==!1},a.createElement(d.Z,{type:"primary",onClick:function(){J()&&h(!0)}},"Train Model"),a.createElement(Q.Z,{className:Y().modal,title:"Train Model",visible:Z,onCancel:function(){return h(!1)},footer:null},a.createElement(M.Z,{form:y,name:"basic",labelCol:{span:6},wrapperCol:{span:16},initialValues:{remember:!1},onFinish:function(H){var C=H.path;v.trainModel(C),h(!1)},autoComplete:"off"},a.createElement(M.Z.Item,{label:"Dataset Path",name:"path",rules:[{required:!0,message:"Please input dataset path"}]},a.createElement(E.Z,{autoComplete:"off"})),a.createElement(M.Z.Item,{wrapperCol:{offset:8,span:16}},a.createElement(X.Z,null,a.createElement(d.Z,{onClick:function(){h(!1),y.resetFields()}},B),a.createElement(d.Z,{type:"primary",htmlType:"submit"},"Train"))))))},D=ee,G=e(35261),te=function(){var v,l,o,t=(0,W.Gd)(a.useState),Z=_.Z.getQueryVariable("projectId"),h=(0,W.RZ)(a.useState),B=T.Z.Option,O=M.Z.useForm(),N=(0,g.Z)(O,1),y=N[0];(0,a.useEffect)(function(){function n(){return m.apply(this,arguments)}function m(){return m=(0,K.Z)((0,R.Z)().mark(function $(){var re,ae,I;return(0,R.Z)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,(0,W.bo)();case 2:if(U.sent){U.next=4;break}return U.abrupt("return");case 4:if(t.getAll(),Z){U.next=8;break}return p.default.error("Machine Learning settings are specific to every project. Please choose a project first."),U.abrupt("return");case 8:return U.next=10,t.getCurr(Z);case 10:I=U.sent,I!=null&&(re=I.otherSettings)!==null&&re!==void 0&&re.mlBackendUrl&&h.setMlBackendUrl(I==null||(ae=I.otherSettings)===null||ae===void 0?void 0:ae.mlBackendUrl);case 12:case"end":return U.stop()}},$)})),m.apply(this,arguments)}n()},[]),(0,a.useEffect)(function(){if(!!t.curr){var n=t.curr.otherSettings?t.curr.otherSettings:{},m=n.models&&n.perviousModel?n.models[n.perviousModel]:{},$={mlBackendUrl:n.mlBackendUrl,modelName:n.perviousModel,trainBatchSize:m.trainBatchSize};y.setFieldsValue($),n!=null&&n.mlBackendUrl&&h.setMlBackendUrl(n.mlBackendUrl)}},[t.curr]);function J(){if(!t.curr){p.default.error("Please choose a project first!");return}var n=y.getFieldValue("mlBackendUrl");h.setMlBackendUrl(n);var m=(0,j.Z)((0,j.Z)({},t.curr.otherSettings),{},{mlBackendUrl:n});t.update(t.curr.projectId,{otherSettings:m})}function f(n){if(console.log("saveMlsettings",t.curr,n),!t.curr){p.default.error("Please select model first!");return}t.curr.otherSettings||(t.curr.otherSettings={});var m=t.curr.otherSettings.models?t.curr.otherSettings.models:{};m[n.modelName]=n,t.curr.otherSettings.mlBackendUrl=y.getFieldValue("mlBackendUrl"),t.curr.otherSettings.perviousModel=n.modelName,t.curr.otherSettings.models=m,t.update(t.curr.projectId,{otherSettings:t.curr.otherSettings}),p.default.info("Ml setting saved. Let's start trainig or inference!")}function H(n){var m=t.curr.otherSettings;h.train(m.perviousModel,n,m.models[m.perviousModel])}function C(){var n=t.curr.otherSettings;if(!n||!n.mlBackendUrl||!n.perviousModel){p.default.error("Please set and save ml settings first.");return}p.default.info("Running inference."),t.predict(t.curr.projectId,{mlBackendUrl:n.mlBackendUrl,model:n.perviousModel,sameServer:!1,createLabel:!0}).then(function(){p.default.info("Prediction Complete")})}return a.createElement(P.Z,null,a.createElement(c.Z,null,"Project:",a.createElement(T.Z,{placeholder:"Select a project",onChange:function(m){return t.getCurr(m)},value:(v=t.curr)===null||v===void 0?void 0:v.projectId},(l=t.all)===null||l===void 0?void 0:l.map(function(n){return a.createElement(B,{value:n.projectId},n.name)}))),a.createElement(c.Z,{hidden:t.curr==null},a.createElement(D,{model:h,project:t.curr,trainModel:H}),a.createElement(G.Z,{project:t.curr}),a.createElement(d.Z,{type:"primary",onClick:function(){var m,$;if(!((m=t.curr)!==null&&m!==void 0&&($=m.otherSettings)!==null&&$!==void 0&&$.mlBackendUrl)){p.default.error("Set backend url first");return}window.open("".concat(t.curr.otherSettings.mlBackendUrl.replace("model","visualdl")),"_blank")}},"Progress"),a.createElement(d.Z,{type:"primary",onClick:C},"Run Inference")),a.createElement(c.Z,null,a.createElement(d.Z,{type:"primary",onClick:function(){console.log("pjid",t.curr.projectId),s.m8.push("/".concat(t.curr.taskCategory.name,"?projectId=").concat(t.curr.projectId))}},"Label"),a.createElement(d.Z,{type:"primary",onClick:function(){s.m8.push("/project_overview?projectId=".concat(t.curr.projectId))}},"Project Overview")),a.createElement(c.Z,null,a.createElement(M.Z,{form:y,layout:"horizontal",size:"large",style:{marginTop:"5.69rem"},onFinish:function(m){console.log("form finish",m),f(m)},hidden:t.curr==null},a.createElement(E.Z.Group,{compact:!0},a.createElement(M.Z.Item,{name:"mlBackendUrl",rules:[{required:!0,message:"Please input ml backend url"}],style:{fontSize:"1.5rem"}},a.createElement(E.Z,{autoComplete:"off",allowClear:!0,addonBefore:"ML Backend URL ",style:{textAlign:"left"}})),a.createElement(d.Z,{type:"primary",onClick:J},"Set")),a.createElement(M.Z.Item,{name:"modelName",label:"Model",labelCol:{span:6},wrapperCol:{span:16},rules:[{required:!0,message:"Please select a model"}],style:{fontSize:"1.5rem"}},a.createElement(T.Z,{placeholder:"Select a model"},(o=h.all)===null||o===void 0?void 0:o.map(function(n){return a.createElement(B,{value:n.name},n.name)}))),a.createElement(M.Z.Item,{name:"trainBatchSize",label:"Training Batch Size",labelCol:{span:6},wrapperCol:{span:16},style:{fontSize:"1.5rem"}},a.createElement(E.Z,{autoComplete:"off",placeholder:"Training batch size"})),a.createElement(M.Z.Item,{wrapperCol:{span:16,offset:6}},a.createElement(d.Z,{htmlType:"submit",type:"primary",style:{height:"2.5rem",width:"48%"},block:!0},"Save")))))},r=te},5467:function(b,x,e){"use strict";e.d(x,{Z:function(){return S}});function S(E){return Object.keys(E).reduce(function(L,d){return(d.startsWith("data-")||d.startsWith("aria-")||d==="role")&&!d.startsWith("data-__")&&(L[d]=E[d]),L},{})}},47933:function(b,x,e){"use strict";e.d(x,{ZP:function(){return te}});var S=e(22122),E=e(96156),L=e(28481),d=e(94184),j=e.n(d),R=e(21770),i=e(67294),p=e(53124),K=e(97647),w=e(5467),M=i.createContext(null),g=M.Provider,k=M,T=i.createContext(null),a=T.Provider,s=e(50132),P=e(42550),c=e(98866),_=e(65223),W=function(r,u){var v={};for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&u.indexOf(l)<0&&(v[l]=r[l]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,l=Object.getOwnPropertySymbols(r);o<l.length;o++)u.indexOf(l[o])<0&&Object.prototype.propertyIsEnumerable.call(r,l[o])&&(v[l[o]]=r[l[o]]);return v},q=function(u,v){var l,o=i.useContext(k),t=i.useContext(T),Z=i.useContext(p.E_),h=Z.getPrefixCls,B=Z.direction,O=i.useRef(),N=(0,P.sQ)(v,O),y=(0,i.useContext)(_.aM),J=y.isFormItemInput,f=function(oe){var le,ne;(le=u.onChange)===null||le===void 0||le.call(u,oe),(ne=o==null?void 0:o.onChange)===null||ne===void 0||ne.call(o,oe)},H=u.prefixCls,C=u.className,n=u.children,m=u.style,$=u.disabled,re=W(u,["prefixCls","className","children","style","disabled"]),ae=h("radio",H),I=((o==null?void 0:o.optionType)||t)==="button"?"".concat(ae,"-button"):ae,z=(0,S.Z)({},re),U=i.useContext(c.Z);z.disabled=$||U,o&&(z.name=o.name,z.onChange=f,z.checked=u.value===o.value,z.disabled=z.disabled||o.disabled);var se=j()("".concat(I,"-wrapper"),(l={},(0,E.Z)(l,"".concat(I,"-wrapper-checked"),z.checked),(0,E.Z)(l,"".concat(I,"-wrapper-disabled"),z.disabled),(0,E.Z)(l,"".concat(I,"-wrapper-rtl"),B==="rtl"),(0,E.Z)(l,"".concat(I,"-wrapper-in-form-item"),J),l),C);return i.createElement("label",{className:se,style:m,onMouseEnter:u.onMouseEnter,onMouseLeave:u.onMouseLeave},i.createElement(s.Z,(0,S.Z)({},z,{type:"radio",prefixCls:I,ref:N})),n!==void 0?i.createElement("span",null,n):null)},Q=i.forwardRef(q),A=Q,X=i.forwardRef(function(r,u){var v,l=i.useContext(p.E_),o=l.getPrefixCls,t=l.direction,Z=i.useContext(K.Z),h=(0,R.Z)(r.defaultValue,{value:r.value}),B=(0,L.Z)(h,2),O=B[0],N=B[1],y=function(ue){var Ee=O,me=ue.target.value;"value"in r||N(me);var ve=r.onChange;ve&&me!==Ee&&ve(ue)},J=r.prefixCls,f=r.className,H=f===void 0?"":f,C=r.options,n=r.buttonStyle,m=n===void 0?"outline":n,$=r.disabled,re=r.children,ae=r.size,I=r.style,z=r.id,U=r.onMouseEnter,se=r.onMouseLeave,ie=r.onFocus,oe=r.onBlur,le=o("radio",J),ne="".concat(le,"-group"),ce=re;C&&C.length>0&&(ce=C.map(function(F){return typeof F=="string"||typeof F=="number"?i.createElement(A,{key:F.toString(),prefixCls:le,disabled:$,value:F,checked:O===F},F):i.createElement(A,{key:"radio-group-value-options-".concat(F.value),prefixCls:le,disabled:F.disabled||$,value:F.value,checked:O===F.value,style:F.style},F.label)}));var de=ae||Z,fe=j()(ne,"".concat(ne,"-").concat(m),(v={},(0,E.Z)(v,"".concat(ne,"-").concat(de),de),(0,E.Z)(v,"".concat(ne,"-rtl"),t==="rtl"),v),H);return i.createElement("div",(0,S.Z)({},(0,w.Z)(r),{className:fe,style:I,onMouseEnter:U,onMouseLeave:se,onFocus:ie,onBlur:oe,id:z,ref:u}),i.createElement(g,{value:{onChange:y,value:O,disabled:r.disabled,name:r.name,optionType:r.optionType}},ce))}),V=i.memo(X),Y=function(r,u){var v={};for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&u.indexOf(l)<0&&(v[l]=r[l]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,l=Object.getOwnPropertySymbols(r);o<l.length;o++)u.indexOf(l[o])<0&&Object.prototype.propertyIsEnumerable.call(r,l[o])&&(v[l[o]]=r[l[o]]);return v},ee=function(u,v){var l=i.useContext(p.E_),o=l.getPrefixCls,t=u.prefixCls,Z=Y(u,["prefixCls"]),h=o("radio",t);return i.createElement(a,{value:"button"},i.createElement(A,(0,S.Z)({prefixCls:h},Z,{type:"radio",ref:v})))},D=i.forwardRef(ee),G=A;G.Button=D,G.Group=V,G.__ANT_RADIO=!0;var te=G},88983:function(b,x,e){"use strict";var S=e(38663),E=e.n(S),L=e(44943),d=e.n(L)},50132:function(b,x,e){"use strict";var S=e(22122),E=e(96156),L=e(81253),d=e(28991),j=e(6610),R=e(5991),i=e(10379),p=e(44144),K=e(67294),w=e(94184),M=e.n(w),g=function(k){(0,i.Z)(a,k);var T=(0,p.Z)(a);function a(s){var P;(0,j.Z)(this,a),P=T.call(this,s),P.handleChange=function(_){var W=P.props,q=W.disabled,Q=W.onChange;q||("checked"in P.props||P.setState({checked:_.target.checked}),Q&&Q({target:(0,d.Z)((0,d.Z)({},P.props),{},{checked:_.target.checked}),stopPropagation:function(){_.stopPropagation()},preventDefault:function(){_.preventDefault()},nativeEvent:_.nativeEvent}))},P.saveInput=function(_){P.input=_};var c="checked"in s?s.checked:s.defaultChecked;return P.state={checked:c},P}return(0,R.Z)(a,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var P,c=this.props,_=c.prefixCls,W=c.className,q=c.style,Q=c.name,A=c.id,X=c.type,V=c.disabled,Y=c.readOnly,ee=c.tabIndex,D=c.onClick,G=c.onFocus,te=c.onBlur,r=c.onKeyDown,u=c.onKeyPress,v=c.onKeyUp,l=c.autoFocus,o=c.value,t=c.required,Z=(0,L.Z)(c,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","onKeyDown","onKeyPress","onKeyUp","autoFocus","value","required"]),h=Object.keys(Z).reduce(function(N,y){return(y.substr(0,5)==="aria-"||y.substr(0,5)==="data-"||y==="role")&&(N[y]=Z[y]),N},{}),B=this.state.checked,O=M()(_,W,(P={},(0,E.Z)(P,"".concat(_,"-checked"),B),(0,E.Z)(P,"".concat(_,"-disabled"),V),P));return K.createElement("span",{className:O,style:q},K.createElement("input",(0,S.Z)({name:Q,id:A,type:X,required:t,readOnly:Y,disabled:V,tabIndex:ee,className:"".concat(_,"-input"),checked:!!B,onClick:D,onFocus:G,onBlur:te,onKeyUp:v,onKeyDown:r,onKeyPress:u,onChange:this.handleChange,autoFocus:l,ref:this.saveInput,value:o},h)),K.createElement("span",{className:"".concat(_,"-inner")}))}}],[{key:"getDerivedStateFromProps",value:function(P,c){return"checked"in P?(0,d.Z)((0,d.Z)({},c),{},{checked:P.checked}):null}}]),a}(K.Component);g.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){},onKeyDown:function(){},onKeyPress:function(){},onKeyUp:function(){}},x.Z=g}}]);
