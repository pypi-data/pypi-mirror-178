(self.webpackChunkPaddleLabel_Frontend=self.webpackChunkPaddleLabel_Frontend||[]).push([[204],{26647:function(C){C.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1FTWb",toolBarButtonContainer:"toolBarButtonContainer___1Vahn",toolBarButton:"toolBarButton___3mR2H",buttonText:"buttonText___Y0WDm",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3lRZ8",popover:"popover___3zzu2",slider:"slider___ALra-",popoverLeft:"popoverLeft___15lGe"}},52822:function(C){C.exports={roundBall:"roundBall___1pqu1",popover:"popover___1-PR6"}},5882:function(C){C.exports={listItem:"listItem___vtDXn",eye:"eye___AsLBS",roundBall:"roundBall___1J_R3",popover:"popover___1x-2R",delete:"delete___WHPf2",listItemActive:"listItemActive___3FRb7"}},56131:function(C){C.exports={labelList:"labelList___jvD05",listHeader:"listHeader___UM5UF",eye:"eye___II3Po",roundBall:"roundBall___j752J"}},78677:function(C){C.exports={container:"container___G0FNe"}},80961:function(C){C.exports={leftToolbar:"leftToolbar___1xi4t",rightToolbar:"rightToolbar___3dNSB"}},82499:function(C){C.exports={toolBarButtonContainerWrapper:"toolBarButtonContainerWrapper___1SHWL",toolBarButtonContainer:"toolBarButtonContainer___1jKUz",toolBarButton:"toolBarButton___3Ouq1",buttonText:"buttonText___10ls7",toolBarButtonContainerWrapperActive:"toolBarButtonContainerWrapperActive___3AA28",toolBarButtonContainerWrapperDisabled:"toolBarButtonContainerWrapperDisabled___39n5R",toolBarButtonImgDisabled:"toolBarButtonImgDisabled___rRnhA"}},27992:function(C,T,t){"use strict";var z=t(20136),v=t(19181),a=t(13062),f=t(71230),h=t(77883),l=t(49747),L=t(89032),b=t(15746),te=t(66126),S=t(99177),ne=t(2824),e=t(67294),x=t(61541),U=t(26647),K=t.n(U),X=0,Me=100,m=10,Ee=function(E){var O=(0,e.useState)(i(E.size)),P=(0,ne.Z)(O,2),oe=P[0],_e=P[1];function A(_){_e(i(_))}var fe=E.step?E.step:10,ae=E.minSize==null?X:E.minSize,j=E.maxSize==null?Me:E.maxSize;function i(_){return _==null?m:_<=ae?ae:_>=j?j:_}return(0,e.useEffect)(function(){A(E.size)},[E.size]),e.createElement(v.Z,{overlayClassName:"".concat(K().popover," ").concat(E.disLoc=="left"?K().popoverLeft:""),placement:E.disLoc||"right",content:e.createElement(f.Z,null,e.createElement(b.Z,{span:16},e.createElement(S.Z,{className:K().slider,value:oe,max:j,min:ae,onChange:function(I){var M;(M=E.onChange)===null||M===void 0||M.call(0,I)},tooltipVisible:!1})),e.createElement(b.Z,{span:8},e.createElement(l.Z,{min:ae,max:j,value:oe,onChange:function(I){var M;(M=E.onChange)===null||M===void 0||M.call(0,I)},step:fe}))),trigger:"hover",visible:E.disabled?!1:void 0}," ",e.createElement(x.Z,{imgSrc:E.imgSrc||"",onClick:!E.disabled&&E.onClick||void 0,active:E.active,disabled:E.disabled},E.children))};T.Z=Ee},63097:function(C,T,t){"use strict";var z=t(20136),v=t(19181),a=t(2824),f=t(67294),h=t(52822),l=t.n(h),L=t(63144),b=function(S){var ne=(0,f.useState)(S.color||"#FFF"),e=(0,a.Z)(ne,2),x=e[0],U=e[1];return(0,f.useEffect)(function(){U(S.color||"#FFF")},[S]),S.changeable?f.createElement(v.Z,{getPopupContainer:function(X){return X.parentElement||document.body},overlayClassName:l().popover,openClassName:l().popoverOpenClassName,placement:"bottom",content:f.createElement(L.xS,{disableAlpha:!0,color:x,onChange:function(X){U(X.hex)},onChangeComplete:S.onChange}),trigger:"click"},f.createElement("div",{className:l().roundBall,style:{backgroundColor:x}})):f.createElement("div",{className:l().roundBall,style:{backgroundColor:x}})};T.Z=b},5041:function(C,T,t){"use strict";t.d(T,{Z:function(){return ae}});var z=t(54421),v=t(38272),a=t(57663),f=t(71577),h=t(2824),l=t(67294),L=t(56131),b=t.n(L),te=t(49111),S=t(19650),ne=t(11849),e=t(5882),x=t.n(e),U=t(63097),K=function(i){var _=(0,ne.Z)({},i.label),I=(0,l.useState)(_.invisible),M=(0,h.Z)(I,2),D=M[0],k=M[1],ie=(0,l.useState)(0),H=(0,h.Z)(ie,2),y=H[0],V=H[1],Y=i.hideEye?" ":l.createElement(l.Fragment,null,l.createElement("a",{className:x().eye,style:{backgroundImage:D?"url(./pics/hide.png)":"url(./pics/show.png)"},onClick:function(G){G.stopPropagation(),k(!D),i.onLabelModify&&i.onLabelModify(_)}})," "),W=i.hideColorPicker?l.createElement(l.Fragment,null):l.createElement(U.Z,{color:_.color,changeable:!1,onChange:function(G){_.color=G.hex,i.onLabelModify(_)}}),F=l.createElement(v.ZP.Item,{className:"".concat(x().listItem," ").concat(i.active?x().listItemActive:""),unselectable:"on",onClick:function(){i.onClick(_)},"data-test-id":"category-".concat(_.ith)},l.createElement(S.Z,{align:"center",size:5},Y,_.name,W),l.createElement("a",{className:x().delete,onClick:function(G){G.stopPropagation();var de=new Date().getTime();de-y<300||(V(de),i.onLabelDelete(_))},"data-test-id":"deleteCategory-".concat(_.ith)}));return F},X=K,Me=t(71194),m=t(48889),Ee=t(47673),ge=t(74485),E=t(9715),O=t(71257),P=t(48971),oe=["#FF0000","#008000","#0000FF","#FFFF00","#FFA500","#00FFFF","#8B00FF","#FFC0CB","#7CFC00","#007FFF","#800080","#36BF36","#DAA520","#800000","#008B8B","#B22222","#E6D933","#000080","#FF00FF","#FFFF99","#87CEEB","#5C50E6","#CD5C5C","#20B2AA","#E680FF","#4D1F00","#006374","#B399FF","#8B4513","#BA55D3","#C0C0C0","#808080","#000000"],_e=function(i){var _,I,M=(0,P.YB)(),D=M.formatMessage({id:"component.PPAddLabelModal.selectColor"}),k=M.formatMessage({id:"component.PPAddLabelModal.addLabel"}),ie=M.formatMessage({id:"component.PPAddLabelModal.labelName"}),H=M.formatMessage({id:"component.PPCreater.cancel"}),y=M.formatMessage({id:"component.PPSegMode.ok"}),V=(0,l.useState)(((_=i.defaultLabel)===null||_===void 0?void 0:_.color)||oe[i.order||0]),Y=(0,h.Z)(V,2),W=Y[0],F=Y[1];(0,l.useEffect)(function(){var J;F(((J=i.defaultLabel)===null||J===void 0?void 0:J.color)||oe[i.order||0])},[i]);var re=i.hideColorPicker?l.createElement(l.Fragment,null):l.createElement(O.Z.Item,{label:D,name:"color"},l.createElement(U.Z,{color:W,changeable:!0,onChange:function(Q){F(Q.hex)}})),G=O.Z.useForm(),de=(0,h.Z)(G,1),Z=de[0];return l.createElement(m.Z,{title:k,visible:i.visible,onCancel:i.onCancel,footer:null},l.createElement(O.Z,{form:Z,name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!1,labelname:(I=i.defaultLabel)===null||I===void 0?void 0:I.name},onFinish:function(Q){var be={name:Q.labelname,color:W};i.onLabelAdd(be),Z.resetFields()},autoComplete:"off"},l.createElement(O.Z.Item,{label:ie,name:"labelname",rules:[{required:!0,message:"Please input label name!"}]},l.createElement(ge.Z,{autoComplete:"off"})),re,l.createElement(O.Z.Item,{wrapperCol:{offset:8,span:16}},l.createElement(S.Z,null,l.createElement(f.Z,{onClick:function(){var Q;(Q=i.onCancel)===null||Q===void 0||Q.call(0),Z.resetFields()}},H),l.createElement(f.Z,{type:"primary",htmlType:"submit"},y)))))},A=_e,fe=function(i){var _,I=(0,P.YB)(),M=I.formatMessage({id:"component.PPLabelList.addLabel"}),D=I.formatMessage({id:"component.PPLabelList.labelList"});if(i.labels)for(var k=0;k<i.labels.length;k++)i.labels[k].ith=k;var ie=(0,l.useState)(!1),H=(0,h.Z)(ie,2),y=H[0],V=H[1];return l.createElement(l.Fragment,null,l.createElement(v.ZP,{className:b().labelList,size:"large",header:l.createElement("div",{className:b().listHeader},D),footer:l.createElement("div",null,l.createElement(f.Z,{style:{height:40,fontSize:"0.75rem"},type:"primary",disabled:i.disabled,onClick:function(){V(!0)},block:!0},M)),bordered:!0,dataSource:i.labels,renderItem:function(W){var F;return l.createElement(X,{hideColorPicker:i.hideColorPicker,hideEye:i.hideEye,onClick:i.onLabelSelect,label:W,active:(F=i.activeIds)===null||F===void 0?void 0:F.has(W.labelId),onLabelDelete:i.onLabelDelete,onLabelModify:i.onLabelModify})}}),l.createElement(A,{hideColorPicker:i.hideColorPicker,order:(_=i.labels)===null||_===void 0?void 0:_.length,visible:y,onLabelAdd:function(W){i.onLabelAdd(W),V(!1)},onCancel:function(){V(!1)}}))},ae=fe},8088:function(C,T,t){"use strict";var z=t(67294),v=t(78677),a=t.n(v),f=function(l){return z.createElement("div",{className:"".concat(a().container," ").concat(l.className)},l.children)};T.Z=f},10137:function(C,T,t){"use strict";var z=t(34669),v=t(54458),a=t(67294),f=t(83721),h=function(L){var b,te,S=(0,f.Ad)("pages.toolBar.progress");return a.createElement("div",{className:"progress"},a.createElement(v.Z,{className:"progressBar",percent:Math.ceil(L.project.finished/((b=L.task.all)===null||b===void 0?void 0:b.length)*100),status:"active",showInfo:!1})," ",a.createElement("span",{className:"progressDesc"},"".concat(S(""),": ").concat(L.project.finished||0,"/").concat((te=L.task.all)===null||te===void 0?void 0:te.length,`
        `).concat(S("currentId"),": ").concat(L.task.currIdx==null?1:L.task.currIdx+1," ")))};T.Z=h},57436:function(C,T,t){"use strict";var z=t(86582),v=t(2824),a=t(67294),f=t(65031),h=t(84420),l=t.n(h),L=t(48971),b="./pics/basketball.jpg";function te(ne){switch(ne){case"mover":return"move";case"rectangle":case"polygon":return"crosshair";default:return"default"}}var S=function(e,x){var U,K,X=l()(e.imgSrc||"","anonymous"),Me=(0,v.Z)(X,1),m=Me[0],Ee=e.transparency==null?0:e.transparency*.01,ge=(0,L.tT)("InteractorData",function(o){return o.interactorData}),E=(0,L.tT)("VisualRadius",function(o){return o.radius}),O=void 0;e.currentTool=="polygon"||e.currentTool=="rectangle"||e.currentTool=="editor"?O=e.drawTool.polygon:e.currentTool=="brush"?O=e.drawTool.brush:e.currentTool=="rubber"?O=e.drawTool.rubber:e.currentTool=="interactor"&&(O=e.drawTool.interactor);var P=O;console.log("drawToolTemp",O);var oe=(0,a.useState)(0),_e=(0,v.Z)(oe,2),A=_e[0],fe=_e[1],ae=(0,a.useState)(0),j=(0,v.Z)(ae,2),i=j[0],_=j[1],I=(0,a.useState)(500),M=(0,v.Z)(I,2),D=M[0],k=M[1],ie=(0,a.useState)(500),H=(0,v.Z)(ie,2),y=H[0],V=H[1],Y=(0,a.useState)([]),W=(0,v.Z)(Y,2),F=W[0],re=W[1],G=(0,a.useState)({x:0,y:0}),de=(0,v.Z)(G,2),Z=de[0],J=de[1],Q=(0,a.useState)({x:0,y:0}),be=(0,v.Z)(Q,2),R=be[0],Ve=be[1],Ge=(0,a.useState)([]),Oe=(0,v.Z)(Ge,2),$=Oe[0],Ie=Oe[1],Je=(0,a.useState)(!1),Re=(0,v.Z)(Je,2),xe=Re[0],ye=Re[1],Qe=(0,a.useState)(!0),We=(0,v.Z)(Qe,2),Te=We[0],Fe=We[1],$e=(0,a.useState)(!0),Ze=(0,v.Z)($e,2),qe=Ze[0],pe=Ze[1],et=(0,a.useState)(0),Ue=(0,v.Z)(et,2),De=Ue[0],tt=Ue[1],nt=(0,a.useState)(),Ke=(0,v.Z)(nt,2),at=Ke[0],lt=Ke[1],he=(0,a.useRef)(null),q=(0,a.useRef)(null),s=(0,a.useRef)(null),Ce=(0,a.useRef)(null),Be=(0,a.useRef)(null),me={onDrag:e.onAnnotationModify,onDragUP:e.onAnnotationModifyUP,scale:e.scale,currentTool:e.currentTool,onSelect:e.setCurrentAnnotation,OnSelects:e.OnSelect,stageRef:he,layerRef:q,currentAnnotation:e.currentAnnotation,transparency:Ee,threshold:e.threshold,canvasRef:s,canvasRef2:Ce,interactorData:ge,label:e.currentLabel,radius:E};function Ne(){var o=document.getElementById("dr");o&&(fe(o.clientWidth),_(o.clientHeight))}var we=function(){var n=[];e.annotations.forEach(function(r,c){if(r){var u;me.annotation=r;var d;if(r.type=="polygon"){var B;console.log("CurrentAnnotation",e.currentAnnotation,r);var g=Te||((B=e.currentAnnotation)===null||B===void 0?void 0:B.result)!==r.result;d=e.drawTool.polygon.drawAnnotation(me,g)}else r.type=="rectangle"&&(d=e.drawTool.polygon.drawAnnotation(me));if(r.type=="brush"){var p,ee;d=(p=e.drawTool.brush)===null||p===void 0?void 0:p.drawAnnotation(me),(ee=q.current)===null||ee===void 0||ee.batchDraw()}else if(r.type=="rubber"){var N,w;d=(N=e.drawTool.rubber)===null||N===void 0?void 0:N.drawAnnotation(me),(w=q.current)===null||w===void 0||w.batchDraw()}d&&((u=d)===null||u===void 0?void 0:u.key)!==null&&n.push(d),console.log("shape",d)}}),console.log("newShapes",n),re(n)};(0,a.useEffect)(function(){window.removeEventListener("resize",Ne),window.addEventListener("resize",Ne);var o=document.getElementById("dr");o&&(fe(o.clientWidth),_(o.clientHeight))},[]),(0,a.useEffect)(function(){if(console.log("flags",i,A,m,typeof m!="string",e.scaleChange,e.taskIndex!==void 0),i&&A&&m&&typeof m!="string"&&e.scaleChange&&e.taskIndex!==void 0){var o=(m==null?void 0:m.width)||0,n=(m==null?void 0:m.height)||0,r=A/o,c=i/n,u=0;r>1&&c>1,r>c?u=i/n:u=A/o,e.scaleChange(u),V(n),k(o)}},[i,A,m]),(0,a.useEffect)(function(){var o,n;s!=null&&(o=s.current)!==null&&o!==void 0&&o.width&&s!==null&&s!==void 0&&(n=s.current)!==null&&n!==void 0&&n.height&&(console.log("saveDrawingSurface\u51FD\u6570\u6267\u884C\u4E86"),rt())},[s==null||(U=s.current)===null||U===void 0?void 0:U.width,s==null||(K=s.current)===null||K===void 0?void 0:K.height]),(0,a.useEffect)(function(){!he.current||(he.current.container().style.cursor=te(e.currentTool),ye(!1))},[e.currentTool]),(0,a.useEffect)(function(){if(e.annotations){var o,n,r;console.log("PPStage rendering annotations:",e.annotations);var c=(o=s.current)===null||o===void 0?void 0:o.getContext("2d"),u=(n=Ce.current)===null||n===void 0?void 0:n.getContext("2d"),d=(r=Ce.current)===null||r===void 0?void 0:r.getContext("2d");c&&c.clearRect(0,0,c.canvas.width,c.canvas.height),u&&u.clearRect(0,0,u.canvas.width,u.canvas.height),d&&d.clearRect(0,0,d.canvas.width,d.canvas.height),qe?setTimeout(function(){we(),pe(!1)},500):we()}},[e.annotations,e.currentAnnotation,Te,e.currentTool]),(0,a.useEffect)(function(){var o;console.log("shapes",F),(o=q.current)===null||o===void 0||o.batchDraw()},[F]),(0,a.useEffect)(function(){var o,n,r,c,u=(o=s.current)===null||o===void 0?void 0:o.getContext("2d");u&&u.clearRect(0,0,u.canvas.width,u.canvas.height),(n=e.drawTool)===null||n===void 0||(r=n.interactor)===null||r===void 0||r.drawAnnotation(me),(c=q.current)===null||c===void 0||c.batchDraw()},[ge,e.threshold]);var ot=function(n){var r,c=Math.abs(R.x-n.x),u=Math.abs(R.y-n.y),d=(r=s.current)===null||r===void 0?void 0:r.getContext("2d");if(!d)return a.createElement(a.Fragment,null);console.log("canvasRef",s,d),d.beginPath(),n.x>=R.x?n.y>=R.y?d.rect(R.x,R.y,c,u):d.rect(R.x,R.y,c,-u):n.y>=R.y?d.rect(R.x,R.y,-c,u):d.rect(R.x,R.y,-c,-u),console.log("startPos",R,n),d.strokeStyle="red",d.stroke()};function it(o){var n,r=(n=s.current)===null||n===void 0?void 0:n.getContext("2d");console.log("drawingSurfaceImageData",o),r==null||r.putImageData(o,0,0)}function rt(){var o,n,r,c=(o=s.current)===null||o===void 0?void 0:o.getContext("2d");if(s!=null&&(n=s.current)!==null&&n!==void 0&&n.width&&s!==null&&s!==void 0&&(r=s.current)!==null&&r!==void 0&&r.height){var u,d;console.log("ctx",c);var B=c==null?void 0:c.getImageData(0,0,s==null||(u=s.current)===null||u===void 0?void 0:u.width,s==null||(d=s.current)===null||d===void 0?void 0:d.height);lt(B)}}var Le=function(n){return{e:n,mouseX:(n.evt.offsetX-Z.x-A/2)/e.scale+D/2,mouseY:(n.evt.offsetY-Z.y-i/2)/e.scale+y/2,offsetX:-D/2,offsetY:-y/2,canvasRef:s,stageRef:he,img:m}},ze=function(n,r,c,u,d,B,g){n.clearRect(0,0,n.canvas.width,n.canvas.height),n.beginPath(),n.fillStyle=g,n.arc(r,c,u,d,B),n.fill()},dt=function(n,r){var c=r-n,u=Math.random();return n+Math.round(u*c)},ut=function(){e.onMousepoint2&&e.onMousepoint2()},ct=function(){e.onMousepoint&&e.onMousepoint()},je=function(n){var r,c,u;if(n.evt.button===1){ct();return}ye(!0),console.log("props?.tool?.curr",e==null||(r=e.tool)===null||r===void 0?void 0:r.curr);var d=(c=s.current)===null||c===void 0?void 0:c.getContext("2d"),B=(n.evt.offsetX-Z.x-A/2)/e.scale+D/2,g=(n.evt.offsetY-Z.y-i/2)/e.scale+y/2;if((e==null||(u=e.tool)===null||u===void 0?void 0:u.curr)=="polygon"&&d)if(n.evt.button===2){var p,ee,N,w,ue,ce;if(console.log("props.currentAnnotation?.result",(p=e.currentAnnotation)===null||p===void 0?void 0:p.result,(ee=e.currentAnnotation)===null||ee===void 0||(N=ee.result)===null||N===void 0?void 0:N.split(",").length),(w=e.currentAnnotation)!==null&&w!==void 0&&w.result&&e.annotationDelete&&((ue=e.currentAnnotation)===null||ue===void 0||(ce=ue.result)===null||ce===void 0?void 0:ce.split(",").length)<5){var le,Pe=(le=e.annotations)===null||le===void 0?void 0:le.filter(function(Xe){var Ae;if(Xe.result!==((Ae=e.currentAnnotation)===null||Ae===void 0?void 0:Ae.result))return Xe});e.annotationDelete(Pe)}e.setCurrentAnnotation(void 0),Ie([]),Fe(!0)}else{var se;Fe(!1),d.strokeStyle=(se=e.currentLabel)===null||se===void 0?void 0:se.color,d.lineWidth=4,Ie([].concat((0,z.Z)($),[{x:B,y:g}])),P==null||P.onMouseDown(Le(n))}else{var ve,Se;if(Ve({x:B,y:g}),P==null||P.onMouseDown(Le(n)),n.evt.button===2&&ut(),e.currentTool!="brush"&&e.currentTool!="rubber"||!e.brushSize||!d)return;d.beginPath(),d.lineCap="round",d.lineJoin="round",d.lineWidth=e.brushSize,d.strokeStyle=e.currentTool==="brush"?(ve=e.currentLabel)===null||ve===void 0?void 0:ve.color:"rgba(0,0,0,0)",d.moveTo(B,g),(Se=q.current)===null||Se===void 0||Se.batchDraw()}},ke=function(n){var r,c;console.log("props?.currentTool",e==null?void 0:e.currentTool);var u=(n.evt.offsetX-Z.x-A/2)/e.scale+D/2,d=(n.evt.offsetY-Z.y-i/2)/e.scale+y/2,B=(r=s.current)===null||r===void 0?void 0:r.getContext("2d"),g=(c=Be.current)===null||c===void 0?void 0:c.getContext("2d");if((e==null?void 0:e.currentTool)=="rectangle"){it(at),P==null||P.drawGuidewires(u,d,B);var p={x:u,y:d};xe&&ot(p);var ee=De+1;tt(ee)}else if((e==null?void 0:e.currentTool)=="polygon"&&g&&!Te){var N,w;if(g.strokeStyle=(N=e.currentLabel)===null||N===void 0?void 0:N.color,g.lineWidth=4,g.clearRect(0,0,g.canvas.width,g.canvas.height),ze(g,u,d,dt(4,4),0,180,(w=e.currentLabel)===null||w===void 0?void 0:w.color),console.log("pointArr",$),$.length>0){var ue,ce;if(g.beginPath(),g.moveTo($[0].x,$[0].y),$.length>1)for(var le=1;le<$.length;le++)g.lineTo($[le].x,$[le].y);g.lineTo(u,d),g.fillStyle=(ue=e.currentLabel)===null||ue===void 0?void 0:ue.color,g.fill(),g.stroke(),(ce=q.current)===null||ce===void 0||ce.batchDraw()}}else if((e==null?void 0:e.currentTool)=="brush"||(e==null?void 0:e.currentTool)=="rubber"){var Pe;if(!e.currentTool||!e.currentAnnotation||!e.currentAnnotation.result||e.currentAnnotation.result.length<2||!((Pe=e.currentLabel)!==null&&Pe!==void 0&&Pe.color))return;if(xe&&B){var se,ve;B.lineTo(u,d),B.strokeStyle=e.currentTool==="brush"?(se=e.currentLabel)===null||se===void 0?void 0:se.color:"#ccc",B==null||B.stroke(),ze(g,u,d,e.brushSize/2,0,180,"white"),(ve=q.current)===null||ve===void 0||ve.batchDraw()}}P==null||P.onMouseMove(Le(n))},He=function(n){var r;ye(!1),P==null||P.onMouseUp(Le(n));var c=(r=Be.current)===null||r===void 0?void 0:r.getContext("2d");c&&c.clearRect(0,0,c.canvas.width,c.canvas.height)},Ye=function(n){n.cancelBubble=!0,n.evt.preventDefault()};console.log("props.scale",e.scale);var st=e.currentTool=="mover";return(0,a.useImperativeHandle)(x,function(){return{image:m,setDragEndPos:J}}),console.log("image?.width",m==null?void 0:m.width,D),a.createElement("div",{"data-test-id":"stage-container","data-label-length":e.annotations?e.annotations.length:0,"data-image-src":e.imgSrc},a.createElement("canvas",{style:{display:"none"},id:"canvasId",ref:s,width:D,height:y}),a.createElement("canvas",{style:{display:"none"},id:"canvasId",ref:Ce,width:D,height:y}),a.createElement("canvas",{style:{display:"none"},id:"canvasId",ref:Be,width:D,height:y}),a.createElement("svg",{width:"0",height:"0",style:{position:"absolute",zIndex:"-1"}},a.createElement("defs",null,a.createElement("filter",{id:"remove-alpha",x:"0",y:"0",width:"100%",height:"100%"},a.createElement("feComponentTransfer",null,a.createElement("feFuncA",{type:"discrete",tableValues:"0 1"}))))),a.createElement(f.Hf,{width:A,height:i,offsetX:-A/2,offsetY:-i/2,className:"stage",ref:he,draggable:st,onDragMove:function(n){e.currentTool=="mover"},onDragEnd:function(n){e.currentTool=="mover"&&J({x:n.target.x(),y:n.target.y()})},x:Z.x,y:Z.y},a.createElement(f.mh,{onMouseDown:je,onMouseMove:ke,onMouseUp:He,onContextMenu:Ye,scaleX:e.scale,scaleY:e.scale,draggable:!1},a.createElement(f.Ee,{name:"baseImage",draggable:!1,image:(m==null?void 0:m.width)===D?m:void 0,x:-(D||0)/2,y:-(y||0)/2})),a.createElement(f.mh,{ref:q,name:"annotation",scaleX:e.scale,scaleY:e.scale,onMouseDown:je,onMouseMove:ke,onMouseUp:He,onContextMenu:Ye,opacity:Ee},a.createElement(f.Ee,{x:-(D||0)/2,y:-(y||0)/2,displayName:De,image:s.current||void 0}),a.createElement(f.Ee,{x:-(D||0)/2,y:-(y||0)/2,displayName:De,image:Ce.current||void 0}),a.createElement(f.Ee,{x:-(D||0)/2,y:-(y||0)/2,displayName:De,image:Be.current||void 0}),F)))};T.Z=(0,a.forwardRef)(S)},44434:function(C,T,t){"use strict";var z=t(67294),v=t(80961),a=t.n(v),f=function(l){var L=a().leftToolbar;return l.disLoc=="right"&&(L=a().rightToolbar),z.createElement("div",{className:L},l.children)};T.Z=f},61541:function(C,T,t){"use strict";var z=t(49111),v=t(19650),a=t(67294),f=t(82499),h=t.n(f),l=function(b){return a.createElement("div",{unselectable:"on",className:"".concat(h().toolBarButtonContainerWrapper," ").concat(b.active&&h().toolBarButtonContainerWrapperActive," ").concat(b.disabled&&h().toolBarButtonContainerWrapperDisabled),onClick:!b.disabled&&b.onClick||void 0},a.createElement(v.Z,{align:"center",className:h().toolBarButtonContainer,size:0},a.createElement(v.Z,{align:"center",direction:"vertical",className:h().toolBarButton,size:0},a.createElement("img",{className:b.disabled?h().toolBarButtonImgDisabled:void 0,src:b.imgSrc}),a.createElement("div",{className:h().buttonText},b.children))))};T.Z=l}}]);
