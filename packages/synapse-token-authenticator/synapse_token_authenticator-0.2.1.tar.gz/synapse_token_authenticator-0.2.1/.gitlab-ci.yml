include:
  - template: Security/License-Scanning.gitlab-ci.yml

default:
  tags:
    - famedly
    - docker

variables:
  HATCH_ENV: ci

format:
  image: python:bullseye
  stage: test
  before_script:
    - pip install hatch
  script:
    - hatch run format

test:
  image: python:${PYTHON_VERSION}-bullseye
  stage: test
  before_script:
    - pip install hatch
  script:
    - hatch run cov
  parallel:
    matrix:
      - PYTHON_VERSION: "3.11-rc"
      - PYTHON_VERSION: "3.10"
      - PYTHON_VERSION: "3.9"
