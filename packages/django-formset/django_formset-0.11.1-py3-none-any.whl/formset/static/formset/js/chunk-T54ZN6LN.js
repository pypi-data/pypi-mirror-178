import{a as n,b as l}from"./chunk-SNXKFZ2Y.js";import{a as r}from"./chunk-XXGBPDQQ.js";var c="django-sortable-select{opacity:1}django-sortable-select.focus{opacity:1}django-sortable-select.focus>option.sortable-selected{opacity:1;cursor:grab}django-sortable-select.focus>option.sortable-chosen,django-sortable-select.focus>option.sortable-ghost{opacity:1;cursor:grabbing !important}django-sortable-select>option{line-height:normal;cursor:default}django-sortable-select>option.sortable-chosen,django-sortable-select>option.sortable-selected{opacity:1}";l.mount(new n);var d=class extends HTMLElement{constructor(){super();this.lastSelected=null;this.declaredStyles=document.createElement("style"),this.declaredStyles.innerText=c,document.head.appendChild(this.declaredStyles),this.addEventListener("click",e=>this.optionSelected(e)),window.addEventListener("click",e=>this.elementFocus(e))}initialize(e){this.transferStyles(e),l.create(this,{animation:150,fallbackOnBody:!0,multiDrag:!0,onEnd:t=>this.onEnd(t)})}onEnd(e){this.deselectAllOptions();let t=new Event("options-sorted",{bubbles:!0,cancelable:!0,composed:!1});this.dispatchEvent(t)}elementFocus(e){e.target instanceof HTMLElement&&this.contains(e.target)?this.classList.add("focus"):this.classList.remove("focus")}optionSelected(e){if(!(e.target instanceof HTMLOptionElement))return;let t=e.target;if(e instanceof PointerEvent&&e.metaKey)(t.selected=!t.selected)?l.utils.select(t):l.utils.deselect(t);else if(e instanceof PointerEvent&&e.shiftKey&&this.lastSelected){this.deselectAllOptions();let o=!1;for(let s of this.getElementsByTagName("option"))s===t||s===this.lastSelected?(s.selected=!0,o=!o):s.selected=o,s.selected&&l.utils.select(s)}else this.deselectAllOptions(),t.selected=!0,l.utils.select(t);this.lastSelected=t,e.preventDefault()}deselectAllOptions(){for(let e of this.getElementsByTagName("option"))e.selected=!1,l.utils.deselect(e)}transferStyles(e){let t=this.declaredStyles.sheet,o=e.querySelector("option");for(let s=0;t&&s<t.cssRules.length;s++){let a=t.cssRules.item(s),i;switch(a.selectorText){case"django-sortable-select":i=r.extractStyles(e,["display","width","height","border","box-shadow","outline","overflow","font-family","font-size","font-strech","font-style","font-weight","letter-spacing","white-space","line-height"]),t.insertRule(`${a.selectorText}{${i}}`,++s);break;case"django-sortable-select.focus":e.style.transition="none",e.focus(),i=r.extractStyles(e,["border","box-shadow","outline"]),e.blur(),t.insertRule(`${a.selectorText}{${i}}`,++s),e.style.transition="";break;case"django-sortable-select > option.sortable-chosen, django-sortable-select > option.sortable-selected":o&&(o.selected=!0,i=r.extractStyles(o,["color","background-color"]),t.insertRule(`${a.selectorText}{${i}}`,++s),o.selected=!1);break;case"django-sortable-select.focus > option.sortable-chosen, django-sortable-select.focus > option.sortable-selected":e.focus(),o&&(o.selected=!0,i=r.extractStyles(o,["color","background-color"]),t.insertRule(`${a.selectorText}{${i}}`,++s),o.selected=!1),e.blur();break;default:break}}}add(e){this.appendChild(e),l.utils.select(e)}};export{d as a};
//# sourceMappingURL=chunk-T54ZN6LN.js.map
