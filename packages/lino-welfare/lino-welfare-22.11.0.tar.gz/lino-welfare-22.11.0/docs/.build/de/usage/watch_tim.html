
<!DOCTYPE html>

<html lang="de">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>watch_tim &#8212; Lino für ÖSHZ</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/insipid.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/atelier.css" />
    <link rel="stylesheet" type="text/css" href="../_static/insipid-cust.css" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/translations.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script defer src="../_static/insipid.js"></script>
    <script defer src="../_static/insipid-sidebar.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="search" title="Suche" href="../search.html" />
    <link rel="next" title="Kalender" href="cal.html" />
    <link rel="prev" title="Partner" href="partners.html" />
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
  </head><body>
    <script type="text/javascript">
        document.body.classList.add('js');
    </script>
    <input type="checkbox" id="sidebar-checkbox" style="display: none;">
    <label id="overlay" for="sidebar-checkbox"></label>
    <div class="sidebar-resize-handle"></div>
    <script type="text/javascript">
        try {
            let sidebar = localStorage.getItem('sphinx-sidebar');
            const sidebar_width = localStorage.getItem('sphinx-sidebar-width');
            if (sidebar_width) {
                document.documentElement.style.setProperty('--sidebar-width', sidebar_width);
            }
            // show sidebar on wide screen
            if (!sidebar && window.matchMedia('(min-width: 100rem)').matches) {
                sidebar = 'visible';
                // NB: We don't store the value in localStorage!
            }
            if (sidebar === 'visible') {
                document.getElementById('sidebar-checkbox').checked = true;
            }
        } catch(e) {
            console.info(e);
        }
    </script>
    <header id="topbar-placeholder">
      <div id="topbar">
        <div id="titlebar">
          <div class="buttons">
            <label for="sidebar-checkbox" id="sidebar-button" role="button" tabindex="0" aria-controls="sphinxsidebar" accesskey="M">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg>
            </label><a href="../index.html" title="Lino für ÖSHZ">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"/></svg>
</a>
          </div>
          <div class="title">
            <a class="parent" href="index.html" accesskey="U">Benutzung</a>
            <a class="top" href="#">watch_tim</a>
          </div>
          <div class="buttons">
            <button id="fullscreen-button" type="button" aria-hidden="true">
              <span class="enable">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M212.686 315.314L120 408l32.922 31.029c15.12 15.12 4.412 40.971-16.97 40.971h-112C10.697 480 0 469.255 0 456V344c0-21.382 25.803-32.09 40.922-16.971L72 360l92.686-92.686c6.248-6.248 16.379-6.248 22.627 0l25.373 25.373c6.249 6.248 6.249 16.378 0 22.627zm22.628-118.628L328 104l-32.922-31.029C279.958 57.851 290.666 32 312.048 32h112C437.303 32 448 42.745 448 56v112c0 21.382-25.803 32.09-40.922 16.971L376 152l-92.686 92.686c-6.248 6.248-16.379 6.248-22.627 0l-25.373-25.373c-6.249-6.248-6.249-16.378 0-22.627z"/></svg>
              </span>
              <span class="disable">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M4.686 427.314L104 328l-32.922-31.029C55.958 281.851 66.666 256 88.048 256h112C213.303 256 224 266.745 224 280v112c0 21.382-25.803 32.09-40.922 16.971L152 376l-99.314 99.314c-6.248 6.248-16.379 6.248-22.627 0L4.686 449.941c-6.248-6.248-6.248-16.379 0-22.627zM443.314 84.686L344 184l32.922 31.029c15.12 15.12 4.412 40.971-16.97 40.971h-112C234.697 256 224 245.255 224 232V120c0-21.382 25.803-32.09 40.922-16.971L296 136l99.314-99.314c6.248-6.248 16.379-6.248 22.627 0l25.373 25.373c6.248 6.248 6.248 16.379 0 22.627z"/></svg>
              </span>
            </button><a href="https://www.facebook.com/sharer/sharer.php?u=https://welfare.lino-framework.org/usage/watch_tim/" title="Share on Facebook" target="_blank">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg>
</a>

<!---
<a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-show-count="false">Tweet</a>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
---!>

<a href="https://twitter.com/share?ref_src=https://welfare.lino-framework.org/usage/watch_tim/" title="Share on Twitter" target="_blank">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
</a>
          </div>
        </div>
      </div>
    </header>
    <nav>
      <a href="partners.html" class="nav-icon previous" title="zurück:&#13;Partner" aria-label="Vorheriges Thema" accesskey="P" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z"/></svg>
      </a>
      <a href="cal.html" class="nav-icon next" title="weiter:&#13;Kalender" aria-label="Nächstes Thema" accesskey="N" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z"/></svg>
      </a>
    </nav>

    <nav class="relbar">
      <a class="previous" href="partners.html" aria-label="Vorheriges Thema" >
        <div class="icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"/></svg>
        </div>
        <div class="title">
          <span class="text">
            <span class="direction">zurück</span>
            Partner
          </span>
        </div>
      </a>
      <a class="next" href="cal.html" aria-label="Nächstes Thema" >
        <div class="title">
          <span class="text">
            <span class="direction">weiter</span>
            Kalender
          </span>
        </div>
        <div class="icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"/></svg>
        </div>
      </a>
    </nav>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
<section id="watch-tim">
<span id="welfare-watch-tim"></span><h1>watch_tim<a class="headerlink" href="#watch-tim" title="Permalink to this heading">¶</a></h1>
<p>Diese Seite ist die offizielle Dokumentation der Synchronisierung von
TIM nach Lino, einer Funktionalität, die ausschließlich im ÖSHZ Eupen
genutzt wird.</p>
<nav class="contents local" id="inhalt">
<ul class="simple">
<li><p><a class="reference internal" href="#partner-und-watch-tim" id="id1">Partner und watch_tim</a></p>
<ul>
<li><p><a class="reference internal" href="#partnerattribute" id="id2">Partnerattribute</a></p></li>
<li><p><a class="reference internal" href="#anrede" id="id3">Anrede</a></p></li>
<li><p><a class="reference internal" href="#die-inss" id="id4">Die INSS</a></p></li>
<li><p><a class="reference internal" href="#bearbeitungszustand" id="id5">Bearbeitungszustand</a></p></li>
<li><p><a class="reference internal" href="#veraltete-partner" id="id6">Veraltete Partner</a></p></li>
<li><p><a class="reference internal" href="#sonstiges" id="id7">Sonstiges</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#begleitungen" id="id8">Begleitungen</a></p>
<ul>
<li><p><a class="reference internal" href="#primare-begleitung" id="id9">Primäre Begleitung</a></p></li>
<li><p><a class="reference internal" href="#begleitungsdienst" id="id10">Begleitungsdienst</a></p></li>
<li><p><a class="reference internal" href="#regeln" id="id11">Regeln</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#krankenkassen-und-apotheken-klientenkontakte" id="id12">Krankenkassen und Apotheken (Klientenkontakte)</a></p></li>
<li><p><a class="reference internal" href="#technisches" id="id13">Technisches</a></p>
<ul>
<li><p><a class="reference internal" href="#cannot-create-client-0000023756-from-pxs" id="id14">Cannot create Client 0000023756 from PXS</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="partner-und-watch-tim">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Partner und watch_tim</a><a class="headerlink" href="#partner-und-watch-tim" title="Permalink to this heading">¶</a></h2>
<p>Sowohl in TIM als auch in Lino gibt es eine Tabelle der <strong>Partner</strong>.
Die Partnernummer ist die Gleiche in TIM wie in Lino.
Im Hintergrund läuft ständig ein Programm namens <cite>watch_tim</cite>,
das alle Änderungen in TIM automatisch nach Lino synchronisiert.</p>
<p>Partner mit einer Nummer zwischen 200000 und 299999
sind <strong>in Lino erstellt</strong> worden und existieren also nicht in TIM.
Alle anderen Partner sind <strong>importierte</strong> Partner, und die haben
die meisten Datenfelder in Lino schreibgeschützt.</p>
<p>Lino <em>unterteilt</em> Partner etwas anders als TIM.</p>
<p>TIM unterscheidet vier „Partnerarten“:</p>
<ul class="simple">
<li><p>S Sozialhilfeempfänger</p></li>
<li><p>A APH-Bewohner</p></li>
<li><p>V Verschiedene</p></li>
<li><p>I Inaktive Partner</p></li>
</ul>
<p>Bei der Synchronisierung wird nach folgenden Regeln entschieden, wer
wo hin kommt:</p>
<ul class="simple">
<li><p>Wenn mindestens eines der Felder
<cite>PAR-&gt;NB2</cite> (INSS) oder <cite>PAR-&gt;NB1</cite> (Gesdos-Nr)
unleer ist, oder wenn <em>Partnerattribut N (Neuzugang)</em>
gesetzt ist, dann wird es ein
<cite>Klient &lt;pcsw.Client&gt;</cite>.
Wobei zu beachten ist, dass <cite>PAR-&gt;NB2</cite> (INSS) als leer gilt, wenn es
nur eine  Null („0“)  enthält.
Ausnahme:
Wenn <cite>PAR-&gt;NoTva</cite> unleer ist und <cite>PAR-&gt;NB2</cite> (INSS) leer,
dann wird es <em>trotzdem kein</em> Klient
(sondern eine Organisation, s.h. nächster Punkt).</p></li>
<li><p><strong>Ansonsten</strong>, wenn <cite>PAR-&gt;NoTva</cite> unleer ist, wird es eine
<cite>Organisation &lt;contacts.Company&gt;</cite>.</p></li>
<li><p><strong>Ansonsten</strong>, wenn <cite>PAR-&gt;Allo</cite> (Anrede) einen der Werte „Eheleute“,
„Herr und Frau“ enthält, dann wird es ein
<cite>Haushalt &lt;households.Household&gt;</cite></p></li>
<li><p>Ansonsten wird es eine <cite>Person &lt;contacts.Person&gt;</cite>.</p></li>
</ul>
<p>Zusatzregel:</p>
<ul class="simple">
<li><p>um Klient oder Person werden zu können, muss ein Partner außerdem
auch einen <em>Vornamen</em> haben, d.h. <cite>PAR-&gt;Firme</cite> muss mindestens ein
Leerzeichen enthalten.  Hat er das nicht, wird er zum einfachen
Partner, und eventuelle Information in <cite>PAR-&gt;NB1</cite> oder <cite>PAR-&gt;NB2</cite>
werden ignoriert.</p></li>
</ul>
<p>Ob eine Organisation auch Kursanbieter
(<code class="xref py py-class docutils literal notranslate"><span class="pre">welfare.courses.CourseProvider</span></code>) und/oder Stellenabieter
(<code class="xref py py-class docutils literal notranslate"><span class="pre">welfare.jobs.JobProvider</span></code>) ist, wird lediglich in Lino (durch
Ankreuzen des antsprechenden Feldes im Detail-Fenster) entschieden.
TIM kennt diese Information nicht.</p>
<section id="partnerattribute">
<h3><a class="toc-backref" href="#id2" role="doc-backlink">Partnerattribute</a><a class="headerlink" href="#partnerattribute" title="Permalink to this heading">¶</a></h3>
<p>Hier eine Liste der möglichen Partnerattribute in TIM, und was Lino daraus macht.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Attrib</p></th>
<th class="head"><p>Bezeichnung in TIM</p></th>
<th class="head"><p>in Lino</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>H</p></td>
<td><p>Versteckt</p></td>
<td><p>wird ignoriert</p></td>
</tr>
<tr class="row-odd"><td><p>W</p></td>
<td><p>Warnung bei Auswahl</p></td>
<td><p><cite>veraltet</cite> im Reiter <cite>Sonstiges</cite></p></td>
</tr>
<tr class="row-even"><td><p>R</p></td>
<td><p>Schreibgeschützt</p></td>
<td><p>wird ignoriert</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>als Nebenpartner ignorieren</p></td>
<td><p>wird ignoriert</p></td>
</tr>
<tr class="row-even"><td><p>A</p></td>
<td><p>Altfall (automatisch)</p></td>
<td><p>wird ignoriert</p></td>
</tr>
<tr class="row-odd"><td><p>E</p></td>
<td><p>Eingeschlafener Debitor (automatisch)</p></td>
<td><p>wird ignoriert</p></td>
</tr>
<tr class="row-even"><td><p>N</p></td>
<td><p>Neuzugang</p></td>
<td><p>Klient im Bearbeitungszustand „Neuantrag“</p></td>
</tr>
</tbody>
</table>
<p><strong>Partnerattribut W</strong> bewirkt in Lino das Gleiche
wie <strong>Partnerart „Inaktive“</strong>, nämlich dass dieser Partner
das Feld <cite>veraltet</cite> angekreuzt kriegt.</p>
<p>Das <strong>Partnerattribut A</strong> (Altfall) aus TIM ist eine rein buchhalterische
Information (Partner hat seit dd.mm.yyyy keine buchhalterische Bewegung gehabt),
die momentan in Lino nicht importiert wird.
Falls sie mal in Lino sichtbar werden soll,
sollte sie als ein eigenes schreibgeschütztes Ankreuzfeld da stehen.</p>
<p>Hier einige mögliche Überraschungseffekte</p>
<ul class="simple">
<li><p>Ein existierender Klient kann in Lino verschwunden scheinen,
weil er versehentlich als veraltet  markiert wurde
(siehe <a class="reference internal" href="#veraltete-partner">Veraltete Partner</a>).
(siehe <a class="reference internal" href="#partnerattribute">Partnerattribute</a>).
Also nachprüfen, ob er in TIM das <strong>Partnerattribut W</strong> gesetzt hat.
Oder gar unter Partnerart „Inaktive“ steht.</p></li>
<li><p>„Ich sehe in „meiner“ Liste in Lino einen bestimmten aus TIM importierten
Klienten, den ich schon seit Langem nicht mehr begleite.“
–&gt; Um einen aus TIM importierten Klienten
nicht mehr „in meiner Liste“ zu sehen, muss in TIM entweder
das Feld <cite>PAR-&gt;IdUser</cite> geändert,
die Partnerart auf Inaktiv gesetzt
oder das Partnerattribut W eingeschaltet werden.</p></li>
</ul>
</section>
<section id="anrede">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">Anrede</a><a class="headerlink" href="#anrede" title="Permalink to this heading">¶</a></h3>
<p><cite>PAR-&gt;Allo</cite> geht nach <code class="xref py py-attr docutils literal notranslate"><span class="pre">Person.title</span></code> oder <code class="xref py py-attr docutils literal notranslate"><span class="pre">Company.prefix</span></code>.
Außer wenn <cite>PAR-&gt;Allo</cite> es einen der Werte „Eheleute“,
„Herr und Frau“ enthält, dann wird es ein Haushalt.</p>
<p><cite>PAR-&gt;Name2</cite> wird ins Feld „Adresszeile vor Straße“ importiert.</p>
</section>
<section id="die-inss">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">Die INSS</a><a class="headerlink" href="#die-inss" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Es kann Klienten ohne INSS geben.
Die sind dann allerdings „inoffiziell“ bzw. „nicht integriert“ bzw. „ohne Akte beim Ministerium“.
In TIM haben diese Klienten entweder eine leere INSS oder eine 0 dort stehen.
Die 0 wird als „leer“ übertragen, denn
in Lino kann es nicht zwei Klienten mit der gleichen INSS geben.</p></li>
<li><p>Lino lässt auch ungültige INSS zu.</p></li>
<li><p>Ein „Numéro bis“ ist eine provisorische INSS,
die z.B. auch 680000 formatiert ist.
So eine Bis-Nummer kann also dann auch irgendwann mal ändern.</p></li>
</ul>
</section>
<section id="bearbeitungszustand">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Bearbeitungszustand</a><a class="headerlink" href="#bearbeitungszustand" title="Permalink to this heading">¶</a></h3>
<p>Der Bearbeitungszustand eines Klienten kann sein:</p>
<ul>
<li><p><strong>Neuantrag</strong> :
Die Person hat Antrag auf Begleitung gestellt.
Antrag wird überprüft und der Klient muss einem Sachbearbeiter
oder Sozi zugewiesen werden.</p>
<p>Im Detail-Reiter
<code class="xref std std-screen docutils literal notranslate"><span class="pre">Neuanträge</span></code>
kann man einem Neuzugang
einen <strong>Begleiter zuweisen</strong>, wodurch der Klient ins Stadium „Begleitet“ wechelt.</p>
</li>
<li><p><strong>Abgelehnt</strong> :
Die Prüfung des Antrags hat ergeben, dass diese Person kein Anrecht
auf Begleitung durch unser ÖSHZ hat.</p></li>
<li><p><strong>Begleitet</strong> :
Es gibt im ÖSHZ mindestens eine Person, die „sich um die Person kümmert“.
Damit ein Klient im Status „Begleitet“ sein kann, muss mindestens
eine aktive Begleitung existieren.</p></li>
<li><p><strong>Ehemalig</strong> :
War mal begleitet, aber jetzt nicht mehr.
Es existieren Begleitungen, aber keine davon ist <em>aktiv</em>.
Falls es ein importierter Partner ist,
hatte er in TIM entweder das Attribut <cite>W (Warnung bei Auswahl)</cite>
oder die Partnerart <cite>I (Inaktive)</cite>.</p></li>
</ul>
<div class="graphviz"><img src="../_images/graphviz-fcada997e4eb771596632a570047444a44e11b04.png" alt="digraph foo {
   newcomer -&gt; refused [label=&quot;Neuantrag ablehnen&quot;];
   newcomer -&gt; coached [label=&quot;Begleiter zuweisen&quot;];
   refused -&gt; newcomer [label=&quot;Neuantrag wiederholen&quot;];
   coached -&gt; newcomer [label=&quot;Begleitung abbrechen&quot;];
   coached -&gt; former [label=&quot;Begleitung beenden&quot;];

   newcomer [label=&quot;Neuantrag&quot;];
   refused [label=&quot;Abgelehnt&quot;];
   former [label=&quot;Ehemalig&quot;];
   coached [label=&quot;Begleitet&quot;];
}" class="graphviz" /></div>
<p>Bemerkung:
Wie alle Partner haben auch Klienten (im Reiter „Sonstiges“)
ein Ankreuzfeld „veraltet“,
das unabhängig vom <a class="reference internal" href="#bearbeitungszustand">Bearbeitungszustand</a> existiert.
Siehe <a class="reference internal" href="#veraltete-partner">Veraltete Partner</a>.</p>
</section>
<section id="veraltete-partner">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Veraltete Partner</a><a class="headerlink" href="#veraltete-partner" title="Permalink to this heading">¶</a></h3>
<p>Bei importierten Partnern ist
das Ankreuzfeld
<cite>veraltet &lt;contacts.Partner.is_obsolete&gt;</cite>
schreibgeschützt.
Es ist eingeschaltet, wenn diese Person in TIM
entweder in <strong>Partnerart „Inaktive“</strong> steht oder
das <strong>Partnerattribut W</strong> eingeschaltet hat.</p>
</section>
<section id="sonstiges">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Sonstiges</a><a class="headerlink" href="#sonstiges" title="Permalink to this heading">¶</a></h3>
<p>Im Reiter <span class="guilabel">Sonstiges</span> gibt es drei Ankreuzfelder</p>
<ul class="simple">
<li><p>Sozialhilfeempfänger (<cite>is_cpas</cite>) : Angekreuzt , wenn in TIM Partnerart S war.</p></li>
<li><p>Altenheim (<cite>is_senior</cite>) : Angekreuzt , wenn in TIM Partnerart A war.</p></li>
<li><p>veraltet (<cite>is_obsolete</cite>) : Angekreuzt , wenn in TIM Partneraattribut W gesetzt war.</p></li>
</ul>
</section>
</section>
<section id="begleitungen">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Begleitungen</a><a class="headerlink" href="#begleitungen" title="Permalink to this heading">¶</a></h2>
<p>Eine <strong>Begleitung</strong> ist, wenn sich ein bestimmter Mitarbeiter des ÖSHZ
um einen bestimmten Klienten während einer bestimmten Periode
„kümmert“.
Ein Klient kann mehrere Begleitungen auf einmal haben,
z.B. eine im ASD und eine andere im DSBE.</p>
<p>Begleitungen werden entweder manuell erzeugt
durch <cite>Einfügen</cite> in der Tabelle „Begleitungen“,
oder indirekt durch das <strong>Zuweisen</strong> eines verfügbaren Begleiters.</p>
<p>Die Felder <strong>von</strong> und <strong>bis</strong> einer Begleitung definieren die <strong>Begleitungsperiode</strong>.
Das Feld <cite>von</cite> einer Begleitung kann nicht leer sein.
Ein leeres Feld <cite>bis</cite> einer Begleitung bedeutet, dass das Ende nicht bekannt ist.
Eine Begleitung ist (an einem gegebenen Datum <cite>heute</cite>) aktiv,
wenn <cite>von</cite> <strong>&lt;=</strong> <cite>heute</cite> und <cite>bis</cite> entweder leer oder <strong>&gt;=</strong> <cite>heute</cite> ist.</p>
<section id="primare-begleitung">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Primäre Begleitung</a><a class="headerlink" href="#primare-begleitung" title="Permalink to this heading">¶</a></h3>
<p>Lino kann pro Klient mehrere Begleitungen haben,
aber in TIM haben wir nur den „hauptverantwortlichen Sozialarbeiter“ (<cite>PAR-&gt;IdUsr</cite>).
Deshalb gibt es das Konzept der <strong>primären</strong> Begleitung.
In Lino kann pro Klient eine Begleitung primär sein.
Diese entspricht dem Feld <cite>PAR-&gt;IdUsr</cite> aus TIM.</p>
<p>Für die primäre Begleitung eines <em>importierten</em> Klienten gilt:</p>
<ul>
<li><p>Die Felder <cite>primär</cite>, <cite>bis</cite> und <cite>Benutzer</cite> sind schreibgeschützt und wie folgt belegt:</p>
<ul class="simple">
<li><p><cite>primär</cite> = angekreuzt</p></li>
<li><p><cite>Benutzer</cite> : der in TIM angegebene Benutzer</p></li>
<li><p><cite>bis</cite> : entweder leer (wenn es eine aktive Begleitung ist)
oder 01.01.1990 (wenn es ein Neuzugang oder ehemaliger Klient ist)</p></li>
</ul>
<p>Diese Angaben können also nur über TIM verändert werden.</p>
</li>
<li><p>Die Felder <cite>von</cite> und <cite>Dienst</cite> dagegen können manuell geändert werden,
und <cite>watch_tim</cite> geht dann nicht mehr daran.
Beim ersten Erstellen gibt <cite>watch_tim</cite> ihnen folgende Werte:</p>
<ul class="simple">
<li><p><cite>Dienst</cite> = Begleitdienst des Begleiters zu diesem Zeitpunkt</p></li>
<li><p><cite>von</cite> = Erstelldatum des Partners in TIM</p></li>
</ul>
</li>
</ul>
<p>Also man kann auf importierten Klienten in Lino zusätzliche Begleitungen
erstellen, aber diese können nicht primär sein.
An diese sekundären Begleitungen geht <cite>watch_tim</cite> nicht ran.</p>
</section>
<section id="begleitungsdienst">
<span id="welfare-clients-coachingtype"></span><h3><a class="toc-backref" href="#id10" role="doc-backlink">Begleitungsdienst</a><a class="headerlink" href="#begleitungsdienst" title="Permalink to this heading">¶</a></h3>
<p>Jede Begleitung findet zwingend im Rahmen eines bestimmten
<strong>Dienstes</strong> statt.</p>
</section>
<section id="regeln">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Regeln</a><a class="headerlink" href="#regeln" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Ein Neuantrag kann keine Begleitungen haben.
(Ein Klient mit Begleitungen, selbst abgeschlossene,
kann nicht wieder zum Neuantrag werden.
Höchstens zu einem Ehemaligen.)</p></li>
<li><p>Wenn ein Klient ins Stadium Ehemalig wechselt, werden automatisch
alle laufenden Begleitungen beendet.
Ein Ehemaliger kann keine <em>laufenden</em> Begleitungen haben.</p></li>
<li><p>Nur Benutzer mit einem unleeren Feld
<cite>Begleitungsart (Dienst)</cite> in den Benutzereinstellungen
dürfen manuell Begleitungen erstellen.</p></li>
<li><p>Importierte Klienten haben eine importierte primäre
Begleitung, die nicht geändert werden kann.</p></li>
</ul>
</section>
</section>
<section id="krankenkassen-und-apotheken-klientenkontakte">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">Krankenkassen und Apotheken (Klientenkontakte)</a><a class="headerlink" href="#krankenkassen-und-apotheken-klientenkontakte" title="Permalink to this heading">¶</a></h2>
<p>Die Felder PXS-&gt;IdMut (Krankenkasse) und PXS-&gt;Apotheke (Apotheke)
werden nach Lino synchronisiert als <cite>Klientenkontakte
&lt;coachings.ClientContact&gt;</cite>.</p>
<p><em>Importierte</em> Klienten sollten in ihren
<cite>Klientenkontakten &lt;coachings.ClientContact&gt;</cite>
deshalb maximal <em>eine</em> Krankenkasse und <em>eine</em> Apotheke haben.
Sonst findet <cite>watch_tim</cite>, dass er nicht dafür
zuständig ist und synchronisiert nichts
(schreibt lediglich eine Warnung in die <cite>system.log</cite>)</p>
<p>Alle anderen Klientenkontaktarten sind egal,
davon dürfen auch importierte Klienten so viele haben wie sie wollen.</p>
<p>Apotheken sind in TIM normale Partner, aber
Krankenkassen sind Adressen aus <cite>ADR</cite> mit <cite>ADR-&gt;Type == ‚MUT‘</cite>.
Sie erscheinen in Lino als Organisation,
werden aber nicht mehr automatisch synchronisiert.
Also falls des eine in TIM erstellt wird, muss die entsprechende
Organisation in Lino manuell erstellt werden.
Dabei ist zu beachten, dass das <cite>id</cite> einer Krankenasse
beim ersten Import (<cite>initdb_tim</cite>)
wie folgt ermittelt wurde:</p>
<blockquote>
<div><p>id = val(ADR-&gt;IdMut) + 199000</p>
</div></blockquote>
<p>Beim Synchronisieren sind folgende Fehlermeldungen denkbar
(die falls sie auftreten per E-Mail an die Administratoren geschickt werden):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ERROR</span> <span class="n">Client</span> <span class="c1">#20475 (u&quot;MUSTERMANN Max (20475)&quot;) : Pharmacy or Health Insurance 199630 doesn&#39;t exist</span>
<span class="n">ERROR</span> <span class="n">Client</span> <span class="c1">#20475 (u&quot;MUSTERMANN Max (20475)&quot;) : Pharmacy or Health Insurance 0000086256 doesn&#39;t exist</span>
</pre></div>
</div>
<p>Die erste Meldung bedeutet, dass die Krankenkasse fehlt (Nr. 199xxx sind Krankenkassen), also
dass man in TIM in der ADR.DBF die Nr 630 raussucht und diese manuell in Lino als Organisation
199630 anlegt.</p>
<p>Die zweite Meldung ist eine fehlende Apotheke. Da reicht es, in TIM mal auf diese
Apotheke 86256 zu gehen und irgendwas zu ändern,
um manuell eine Synchronisierung auszulösen.
Kann auch sein, dass es in TIM keinen Partner 86256 gibt
(TIM lässt es fälschlicherweise zu, Apotheken zu löschen die anderswo referenziert werden):
dann muss der Klient 20475 sein Feld PXS-&gt;Apotheke auf
leer gesetzt bekommen (oder auf eine andere existierende
Apotheke).</p>
</section>
<section id="technisches">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">Technisches</a><a class="headerlink" href="#technisches" title="Permalink to this heading">¶</a></h2>
<p>In der <a class="reference external" href="https://hosting.lino-framework.org/settings/#xfile-settings.py" title="(in Lino Hosting Guide)"><code class="xref std std-xfile docutils literal notranslate"><span class="pre">settings.py</span></code></a> gibt es folgende Optionen,
die für die Synchronisierung von Belang sind:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">is_imported_partner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">obj</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="c1">#if obj.id == 3999:</span>
    <span class="c1">#    return False</span>
    <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">id</span> <span class="o">&lt;</span> <span class="mi">200000</span> <span class="ow">or</span> <span class="n">obj</span><span class="o">.</span><span class="n">id</span> <span class="o">&gt;</span> <span class="mi">299999</span>



<span class="k">def</span> <span class="nf">TIM2LINO_LOCAL</span><span class="p">(</span><span class="n">alias</span><span class="p">,</span><span class="n">obj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Hook for local special treatment on instances</span>
<span class="sd">    that have been imported from TIM.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">obj</span>

<span class="k">def</span> <span class="nf">TIM2LINO_USERNAME</span><span class="p">(</span><span class="n">userid</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">userid</span> <span class="o">==</span> <span class="s2">&quot;WRITE&quot;</span><span class="p">:</span> <span class="k">return</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">userid</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</pre></div>
</div>
<section id="cannot-create-client-0000023756-from-pxs">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">Cannot create Client 0000023756 from PXS</a><a class="headerlink" href="#cannot-create-client-0000023756-from-pxs" title="Permalink to this heading">¶</a></h3>
<p>Die Meldung kommt, wenn in TIM in der PXS eines Partners etwas
verändert wurde, und dieser Partner in Lino nicht existiert
(was anormal ist, aber z.B. durch frühere Bugs oder Pannen kommen kann).
Zu tun: manuell für diesen Partner in der PAR etwas verändern, um
eine Synchronisierung zu triggern.</p>
</section>
</section>
</section>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">

            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo_web3.png" alt="Logo"/>
            </a></p>
          <div class="sidebar-resize-handle"></div>
<p align="center"><a href="index.rst">EN</a> | <b>DE</b> | <a href="fr/index.rst">FR</a></p>
<h3><a href="../index.html">Inhaltsverzeichnis</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">Über Lino Welfare</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Benutzung</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="clients.html">Klienten verwalten</a></li>
<li class="toctree-l2"><a class="reference internal" href="coachings.html">Begleitungen</a></li>
<li class="toctree-l2"><a class="reference internal" href="partners.html">Partner</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">watch_tim</a></li>
<li class="toctree-l2"><a class="reference internal" href="cal.html">Kalender</a></li>
<li class="toctree-l2"><a class="reference internal" href="general.html">Allgemeines</a></li>
<li class="toctree-l2"><a class="reference internal" href="excerpts.html">Auszüge</a></li>
<li class="toctree-l2"><a class="reference internal" href="aids.html">Beihilfen</a></li>
<li class="toctree-l2"><a class="reference internal" href="contracts.html">Verträge</a></li>
<li class="toctree-l2"><a class="reference internal" href="system.html">Systemkonfigurierung</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html">Allgemeine Testanweisungen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../help/index.html">Selbsthilfe</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../changes/index.html">Release-Notizen</a></li>
</ul>

<hr class="docutils" />
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Schnellsuche</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Los" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
<ul>
</ul><p align="center">
</p>

<div id="ethical-ad-placement"></div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

    <nav class="relbar">
      <a class="previous" href="partners.html" aria-label="Vorheriges Thema" >
        <div class="icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"/></svg>
        </div>
        <div class="title">
          <span class="text">
            <span class="direction">zurück</span>
            Partner
          </span>
        </div>
      </a>
      <a class="next" href="cal.html" aria-label="Nächstes Thema" >
        <div class="title">
          <span class="text">
            <span class="direction">weiter</span>
            Kalender
          </span>
        </div>
        <div class="icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"/></svg>
        </div>
      </a>
    </nav>

    <footer role="contentinfo">
      &#169; Copyright 2012-2022 Rumma &amp; Ko Ltd.
      Zuletzt aktualisiert am 2022-11-08.
      Created using <a class="reference external" href="https://www.sphinx-doc.org/">Sphinx</a> 5.1.1.
      <a class="reference external" href="https://insipid-sphinx-theme.readthedocs.io/">Insipid Theme</a>.
<a href="https://gitlab.com/lino-framework/welfare/-/blob/master/docs/usage/watch_tim.rst?plain=1"
  rel="nofollow">Source code</a>.
<br>

Online link: <a href="https://welfare.lino-framework.org/de/usage/watch_tim.html">https://welfare.lino-framework.org/de/usage/watch_tim.html</a>.


    </footer>
  </body>
</html>