
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>20200722 &#8212; Lino Welfare</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/insipid.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/atelier.css" />
    <link rel="stylesheet" type="text/css" href="../_static/insipid-cust.css" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script defer src="../_static/insipid.js"></script>
    <script defer src="../_static/insipid-sidebar.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="2019" href="2019.html" />
    <link rel="prev" title="2020" href="2020.html" />
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
  </head><body>
    <script type="text/javascript">
        document.body.classList.add('js');
    </script>
    <input type="checkbox" id="sidebar-checkbox" style="display: none;">
    <label id="overlay" for="sidebar-checkbox"></label>
    <div class="sidebar-resize-handle"></div>
    <script type="text/javascript">
        try {
            let sidebar = localStorage.getItem('sphinx-sidebar');
            const sidebar_width = localStorage.getItem('sphinx-sidebar-width');
            if (sidebar_width) {
                document.documentElement.style.setProperty('--sidebar-width', sidebar_width);
            }
            // show sidebar on wide screen
            if (!sidebar && window.matchMedia('(min-width: 100rem)').matches) {
                sidebar = 'visible';
                // NB: We don't store the value in localStorage!
            }
            if (sidebar === 'visible') {
                document.getElementById('sidebar-checkbox').checked = true;
            }
        } catch(e) {
            console.info(e);
        }
    </script>
    <header id="topbar-placeholder">
      <div id="topbar">
        <div id="titlebar">
          <div class="buttons">
            <label for="sidebar-checkbox" id="sidebar-button" role="button" tabindex="0" aria-controls="sphinxsidebar" accesskey="M">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg>
            </label><a href="../index.html" title="Lino Welfare">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"/></svg>
</a>
          </div>
          <div class="title">
            <a class="parent" href="index.html" accesskey="U">Changes</a>
            <a class="top" href="#">20200722</a>
          </div>
          <div class="buttons">
            <button id="fullscreen-button" type="button" aria-hidden="true">
              <span class="enable">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M212.686 315.314L120 408l32.922 31.029c15.12 15.12 4.412 40.971-16.97 40.971h-112C10.697 480 0 469.255 0 456V344c0-21.382 25.803-32.09 40.922-16.971L72 360l92.686-92.686c6.248-6.248 16.379-6.248 22.627 0l25.373 25.373c6.249 6.248 6.249 16.378 0 22.627zm22.628-118.628L328 104l-32.922-31.029C279.958 57.851 290.666 32 312.048 32h112C437.303 32 448 42.745 448 56v112c0 21.382-25.803 32.09-40.922 16.971L376 152l-92.686 92.686c-6.248 6.248-16.379 6.248-22.627 0l-25.373-25.373c-6.249-6.248-6.249-16.378 0-22.627z"/></svg>
              </span>
              <span class="disable">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M4.686 427.314L104 328l-32.922-31.029C55.958 281.851 66.666 256 88.048 256h112C213.303 256 224 266.745 224 280v112c0 21.382-25.803 32.09-40.922 16.971L152 376l-99.314 99.314c-6.248 6.248-16.379 6.248-22.627 0L4.686 449.941c-6.248-6.248-6.248-16.379 0-22.627zM443.314 84.686L344 184l32.922 31.029c15.12 15.12 4.412 40.971-16.97 40.971h-112C234.697 256 224 245.255 224 232V120c0-21.382 25.803-32.09 40.922-16.971L296 136l99.314-99.314c6.248-6.248 16.379-6.248 22.627 0l25.373 25.373c6.248 6.248 6.248 16.379 0 22.627z"/></svg>
              </span>
            </button><a href="https://www.facebook.com/sharer/sharer.php?u=https://welfare.lino-framework.org/changes/20200722/" title="Share on Facebook" target="_blank">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg>
</a>

<!---
<a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-show-count="false">Tweet</a>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
---!>

<a href="https://twitter.com/share?ref_src=https://welfare.lino-framework.org/changes/20200722/" title="Share on Twitter" target="_blank">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
</a>
          </div>
        </div>
      </div>
    </header>
    <nav>
      <a href="2020.html" class="nav-icon previous" title="previous:&#13;2020" aria-label="Previous topic" accesskey="P" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z"/></svg>
      </a>
      <a href="2019.html" class="nav-icon next" title="next:&#13;2019" aria-label="Next topic" accesskey="N" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z"/></svg>
      </a>
    </nav>

    <nav class="relbar">
      <a class="previous" href="2020.html" aria-label="Previous topic" >
        <div class="icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"/></svg>
        </div>
        <div class="title">
          <span class="text">
            <span class="direction">previous</span>
            2020
          </span>
        </div>
      </a>
      <a class="next" href="2019.html" aria-label="Next topic" >
        <div class="title">
          <span class="text">
            <span class="direction">next</span>
            2019
          </span>
        </div>
        <div class="icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"/></svg>
        </div>
      </a>
    </nav>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
<section id="id1">
<h1>20200722<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h1>
<p>These are the <a class="reference external" href="https://community.lino-framework.org/topics/lifecycle.html#term-release-notes" title="(in Lino Community Guide)"><span class="xref std std-term">release notes</span></a> for the upgrade on the <a class="reference internal" href="../api/index.html#weleup"><span class="std std-ref">The Eupen variant of Lino Welfare</span></a> main
production server in July 2020.</p>
<p>This release was mainly for technical reasons to migrate from Python 2 to 3 and
from Debian Lenny to Buster.</p>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#todo" id="id2">TODO</a></p></li>
<li><p><a class="reference internal" href="#summary-for-end-users" id="id3">Summary for end users</a></p></li>
<li><p><a class="reference internal" href="#zukunft-vorschlage-fur-neue-features" id="id4">Zukunft / Vorschläge für neue Features</a></p></li>
<li><p><a class="reference internal" href="#requested-changes" id="id5">Requested changes</a></p></li>
<li><p><a class="reference internal" href="#unrequested-changes" id="id6">Unrequested changes</a></p></li>
<li><p><a class="reference internal" href="#migration-notes" id="id7">Migration notes</a></p></li>
<li><p><a class="reference internal" href="#technical-notes" id="id8">Technical notes</a></p></li>
<li><p><a class="reference internal" href="#after-releases" id="id9">After-releases</a></p></li>
</ul>
</nav>
<section id="todo">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">TODO</a><a class="headerlink" href="#todo" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>check cron jobs</p></li>
<li><p>presences by client : any changes?</p></li>
</ul>
</section>
<section id="summary-for-end-users">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Summary for end users</a><a class="headerlink" href="#summary-for-end-users" title="Permalink to this heading">¶</a></h2>
<p>Es handelt sich hauptsächlich um ein technisch bedingtes Release.  Die neue
Version wird auf einem neuen Server laufen unter Debian 10 und Python 3, aber
folgende Änderungen werden auch für Endbenutzer sichtbar sein:</p>
<ul class="simple">
<li><p>Tx25 funktioniert theoretisch wieder. Ob das auch stimmt, muss können wir nur
gemeinsam mit euch testen, weil dazu eine “echte” Anfrage auf einem
registrierten Klienten gemacht werden muss.</p></li>
<li><p>Bugfix “Falsche Altersberechnung” (Steve 20190404).</p></li>
<li><p>Vermerk “zzgl. MWSt.” in Bescheinigung Schatztruhe (<a class="reference external" href="https://jane.mylino.net/#/api/tickets/PublicTickets/3142">#3142</a>).</p></li>
<li><p>Man kann jetzt Texte direkt aus Word kopieren, ohne deshalb anschließend
Probleme beim Ausdruck zu riskieren.
(<a class="reference external" href="https://jane.mylino.net/#/api/tickets/PublicTickets/3026">#3026</a> “bleaching”)</p></li>
<li><p>Man kann in der Partnerliste nicht mehr direkt einen abstrakten Partner
erstellen, sondern muss dafür in Organisationen, Haushalte oder Personen oder
Klienten gehen.</p></li>
<li><p>Die neue Tabelle <a class="reference external" href="https://dev.lino-framework.org/specs/users.html#lino.modlib.users.UserRoles" title="(in Lino Developer Guide v20.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">lino.modlib.users.UserRoles</span></code></a> (Explorer-Menü) könnte
hilfreich sein beim Formulieren von Änderungswünschen
bzgl. Zugriffsrechten. (20181008)</p></li>
<li><p>Vertragspartner einer VSE kann man jetzt per Doppelklick eingeben
(<a class="reference external" href="https://jane.mylino.net/#/api/tickets/PublicTickets/2619">#2619</a>). Hier kommt jetzt ein kleines Fenster mit den Feldern company
und contact_person. Ein summary view mit Insert-Button (wie bei den Notizen)
scheint Overkill, weil es selten mehr als 15 Vertragspartner gibt.</p></li>
<li><p>Statt “Upload” sagt Lino jetzt “Upload-Datei”.</p></li>
<li><p>Aufgaben pro Klient : hier ist eine neue Kolonne “Priorität”, und die Liste ist andersrum sortiert (neueste Aufgaben zuerst)</p></li>
</ul>
</section>
<section id="zukunft-vorschlage-fur-neue-features">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Zukunft / Vorschläge für neue Features</a><a class="headerlink" href="#zukunft-vorschlage-fur-neue-features" title="Permalink to this heading">¶</a></h2>
<p>Über folgende Themen haben wir bei Gelegenheit gesprochen. Nichts davon ist
dringend oder zwingend.</p>
<ul class="simple">
<li><p>Lino hat eine neue Kalenderansicht, die irgendwann das momentane System
(<a class="reference external" href="https://dev.lino-framework.org/api/lino_xl.lib.extensible.html#module-lino_xl.lib.extensible" title="(in Lino Developer Guide v20.1)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lino_xl.lib.extensible</span></code></a>) ersetzen wird.</p></li>
<li><p>Irgendwann kommt der Umstieg auf die neue Benutzeroberfläche (<a class="reference external" href="https://dev.lino-framework.org/about/overview.html#react" title="(in Lino Developer Guide v20.1)"><span>React front end</span></a>).</p></li>
<li><p>Desktop Notifications (<a class="reference external" href="https://jane.mylino.net/#/api/tickets/PublicTickets/923">#923</a>).  Vorteile: (1) akustisches
Signal, (2) kommt auch dann, wenn Lino minimiert ist, (3) belastet
den Server nicht unnötig.
Diese Änderung sollte vor der Einführung von den Benutzern
ausprobiert werden können, denn DN bedeuten eine Änderung des
Benutzerverhaltens: statt den Lino-Bildschirm offen zu halten und ab
und zu drauf zu schauen, müssen sie sich daran gewöhnen, auf
Desktop-Notifications zu achten. Davon abgesehen ist die
Konfiguration der Clients nicht trivial: Wie lange bleiben sie am
Bildschirm sichtbar? Kann man ihre Dauer auf “endlos” stellen?  Wie
kann man ein akustisches Signal einstellen? Wie gehen die Benutzer
bisher mit “Meine Mitteilungen” in Lino um?</p></li>
<li><p>Lino könnte jetzt row-level edit locking für Klienten machen.</p></li>
<li><p>Intelligente Ansicht Termine auch für cal.EntriesByClient?</p></li>
<li><p>Sprache EN einführen? Cannot change 3rd language from NL to EN because 38
partners have language==”nl”.</p></li>
</ul>
</section>
<section id="requested-changes">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Requested changes</a><a class="headerlink" href="#requested-changes" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>The Tx25 works again.  <a class="reference internal" href="../api/lino_welfare.modlib.cbss.html#module-lino_welfare.modlib.cbss" title="lino_welfare.modlib.cbss"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lino_welfare.modlib.cbss</span></code></a></p></li>
<li><p>Fixed <a class="reference external" href="https://jane.mylino.net/#/api/tickets/PublicTickets/2946">#2946</a> (Wrong age display (leap year bug))</p></li>
<li><p>Added a text “Tous les montants sont mentionnés hors T.V.A.” in the
<code class="xref std std-xfile docutils literal notranslate"><span class="pre">aids/Confirmation/clothing_bank.body.html</span></code> template.</p></li>
<li><p>Bleaching has been activated (<a class="reference external" href="https://jane.mylino.net/#/api/tickets/PublicTickets/3026">#3026</a>).</p></li>
</ul>
</section>
<section id="unrequested-changes">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Unrequested changes</a><a class="headerlink" href="#unrequested-changes" title="Permalink to this heading">¶</a></h2>
<p>The ordering of toolbar buttons changed slightly.</p>
<p>The actions “Merge” and “Duplicate” are no longer available on all models and
for everybody.  Only for “experts” and only for certain database models.</p>
<p>New database field <a class="reference external" href="https://dev.lino-framework.org/specs/cal.html#lino_xl.lib.cal.RecurrenceSet.positions" title="(in Lino Developer Guide v20.1)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">lino_xl.lib.cal.RecurrenceSet.positions</span></code></a> in the tables
<a class="reference external" href="https://dev.lino-framework.org/specs/cal.html#lino_xl.lib.cal.EventPolicy" title="(in Lino Developer Guide v20.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">cal.EventPolicy</span></code></a> (Recurrency policies),
<a class="reference external" href="https://dev.lino-framework.org/specs/cal.html#lino_xl.lib.cal.RecurrentEvent" title="(in Lino Developer Guide v20.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">cal.RecurrentEvent</span></code></a> and
<a class="reference internal" href="../specs/isip.html#lino_welfare.modlib.isip.ExamPolicy" title="lino_welfare.modlib.isip.ExamPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">isip.ExamPolicy</span></code></a>.
Fixes <a class="reference external" href="https://jane.mylino.net/#/api/tickets/PublicTickets/3225">#3225</a>. (book 2019-10-08)</p>
<p>Fixed two unreported minor bugs:  The detail view of a calendar presence is now
in a smaller window than before. Because the biggest part of that window was not
used. In some views of a presence, Lino didn’t show a pointer to “Client” but to
“Partner” (although in welfare the guest of a calendar entry are always
clients). (20181008)</p>
<p>The header of a detail view is now clickable and returns to the grid view.</p>
<p>Calendar entries by contract are now sorted in <em>descending</em> order (newest first).</p>
<p>The properties.PersonProperty model was renamed to cv.PersonProperty</p>
</section>
<section id="migration-notes">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Migration notes</a><a class="headerlink" href="#migration-notes" title="Permalink to this heading">¶</a></h2>
<p>Migration is done as follows:</p>
<ul>
<li><p>on old site, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ go prod
$ a
$ python manage.py dump2py -o snapshot2preview
</pre></div>
</div>
<p>Note that there is a file <a class="reference external" href="https://hosting.lino-framework.org/mirror/#xfile-restore2preview.py" title="(in Lino Hosting Guide)"><code class="xref std std-xfile docutils literal notranslate"><span class="pre">restore2preview.py</span></code></a> in the
<code class="xref std std-xfile docutils literal notranslate"><span class="pre">snapshot2preview</span></code> directory which will not be touched. To see the
database changes that need a manual patch, you can say:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">diff</span> <span class="n">restore</span><span class="o">.</span><span class="n">py</span> <span class="n">restore2preview</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</li>
<li><p>on the new site, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ go prod
$ a
$ pull.sh
$ ./initdb_from_prod.sh
¤ restart_services.sh
</pre></div>
</div>
</li>
</ul>
<p>Checklist after migration:</p>
<ul>
<li><p>Change ServerName in apache conf</p></li>
<li><p>In <a class="reference external" href="https://hosting.lino-framework.org/settings/#xfile-settings.py" title="(in Lino Hosting Guide)"><code class="xref std std-xfile docutils literal notranslate"><span class="pre">settings.py</span></code></a> :</p>
<ul>
<li><p><a class="reference external" href="https://docs.djangoproject.com/en/4.1/ref/settings/#std-setting-ALLOWED_HOSTS" title="(in Django v4.2)"><code class="xref std std-setting docutils literal notranslate"><span class="pre">ALLOWED_HOSTS</span></code></a>, <code class="xref std std-setting docutils literal notranslate"><span class="pre">ADMINS_EMAIL</span></code>
<a class="reference external" href="https://hosting.lino-framework.org/email/#setting-EMAIL_SUBJECT_PREFIX" title="(in Lino Hosting Guide)"><code class="xref std std-setting docutils literal notranslate"><span class="pre">EMAIL_SUBJECT_PREFIX</span></code></a></p></li>
<li><p>in get_plugin_configs():</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">yield</span> <span class="p">(</span><span class="s1">&#39;cbss&#39;</span><span class="p">,</span> <span class="s1">&#39;cbss_environment&#39;</span><span class="p">,</span> <span class="s1">&#39;prod&#39;</span><span class="p">)</span>
<span class="k">yield</span> <span class="p">(</span><span class="s1">&#39;b2c&#39;</span><span class="p">,</span> <span class="s1">&#39;delete_imported_xml_files&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</section>
<section id="technical-notes">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Technical notes</a><a class="headerlink" href="#technical-notes" title="Permalink to this heading">¶</a></h2>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lino</span> <span class="kn">import</span> <span class="n">startup</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">startup</span><span class="p">(</span><span class="s1">&#39;lino_welfare.projects.gerd.settings.doctests&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lino.api.doctest</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lino_xl.lib.cal.mixins</span> <span class="kn">import</span> <span class="n">RecurrenceSet</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rt</span><span class="o">.</span><span class="n">models_by_base</span><span class="p">(</span><span class="n">RecurrenceSet</span><span class="p">)</span>
<span class="go">[&lt;class &#39;lino_xl.lib.cal.models.EntryRepeater&#39;&gt;, &lt;class &#39;lino_xl.lib.cal.models.EventPolicy&#39;&gt;, &lt;class &#39;lino_xl.lib.cal.models.RecurrentEvent&#39;&gt;, &lt;class &#39;lino_welfare.modlib.isip.models.ExamPolicy&#39;&gt;]</span>
</pre></div>
</div>
</section>
<section id="after-releases">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">After-releases</a><a class="headerlink" href="#after-releases" title="Permalink to this heading">¶</a></h2>
<p>20200723 : deactivate pcsw.IdentityChecker, some translations.</p>
</section>
</section>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">

            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo_web3.png" alt="Logo"/>
            </a></p>
          <div class="sidebar-resize-handle"></div>
<p align="center"><b>EN</b> | <a href="de/index.rst">DE</a> | <a href="fr/index.rst">FR</a></p>
<h3><a href="../index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About Lino Welfare</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/index.html">Usage</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../specs/index.html">Specs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../copyright.html">Copyright &amp; legal notes</a></li>
</ul>

<hr class="docutils" />
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
<ul>
  <li class="toctree-l1"><a class="reference internal" href="../py-modindex.html">Python Module Index</a></li>
</ul><p align="center">
</p>

<div id="ethical-ad-placement"></div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

    <nav class="relbar">
      <a class="previous" href="2020.html" aria-label="Previous topic" >
        <div class="icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"/></svg>
        </div>
        <div class="title">
          <span class="text">
            <span class="direction">previous</span>
            2020
          </span>
        </div>
      </a>
      <a class="next" href="2019.html" aria-label="Next topic" >
        <div class="title">
          <span class="text">
            <span class="direction">next</span>
            2019
          </span>
        </div>
        <div class="icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"/></svg>
        </div>
      </a>
    </nav>

    <footer role="contentinfo">
      &#169; <a href="../copyright.html">Copyright</a> 2012-2022 Rumma &amp; Ko Ltd.
      Last updated on 2022-11-08.
      Created using <a class="reference external" href="https://www.sphinx-doc.org/">Sphinx</a> 5.1.1.
      <a class="reference external" href="https://insipid-sphinx-theme.readthedocs.io/">Insipid Theme</a>.
<a href="https://gitlab.com/lino-framework/welfare/-/blob/master/docs/changes/20200722.rst?plain=1"
  rel="nofollow">Source code</a>.
<br>

Online link: <a href="https://welfare.lino-framework.org/changes/20200722.html">https://welfare.lino-framework.org/changes/20200722.html</a>.


    </footer>
  </body>
</html>