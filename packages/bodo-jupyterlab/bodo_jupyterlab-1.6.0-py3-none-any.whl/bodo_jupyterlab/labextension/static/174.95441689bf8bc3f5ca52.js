(self.webpackChunkbodo_jupyterlab=self.webpackChunkbodo_jupyterlab||[]).push([[174],{174:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>q});var s=n(503),o=n(478),r=n(840),a=n(19),l=n(579);async function i(e="",t={}){const n=l.ServerConnection.makeSettings(),s=a.URLExt.join(n.baseUrl,e);let o;console.debug("handler.ts:requestAPI:requestUrl: ",s);try{o=await l.ServerConnection.makeRequest(s,t,n)}catch(e){throw console.error("handler.ts:requestAPI:error: ",e),new l.ServerConnection.NetworkError(e)}const r=await o.json();if(console.debug("handler.ts:requestAPI:data: ",r),!o.ok)throw new l.ServerConnection.ResponseError(o,r.message);return r}async function c(){const e=await i("bodo/catalogmode",{method:"Get"});if(e.e)throw new Error(e.e);return e.catalog_mode}async function u(e){try{await i(`bodo/cluster/${e}/resume`,{method:"Put"})}catch(e){throw new Error(e)}}var d=n(169);class h{constructor(){this._clusterListErrorShown=!1,this._clusters=[],this.updateClusters(!1),this._clusterChanged=new r.Signal(this),this._poll=new o.Poll({factory:async()=>{await this.updateClusters(!1)},frequency:{interval:5e3,backoff:!0,max:6e4},standby:"when-hidden"}),this._poll.start()}get clusters(){return this._clusters}get clusterChaged(){return this._clusterChanged}async getClustersList(e=!1){try{return e?await async function(){const e=await i("bodo/cluster?forceRefresh=True",{method:"GET"});if(e.e)throw new Error(e.e);return e.clusters}():await async function(){const e=await i("bodo/cluster?forceRefresh=False",{method:"GET"});if(e.e)throw new Error(e.e);return e.clusters}()}catch(e){return console.error("Error in ClusterStore.getClustersList: ",e),this._clusterListErrorShown||((0,d.showErrorMessage)("Bodo Extension Error: Unable to get cluster list",e),this._clusterListErrorShown=!0),[]}}async forceUpdate(){try{await this.updateClusters(!0)}catch(e){console.error("Error in ClusterStore.forceUpdate: ",e),this._clusterListErrorShown||((0,d.showErrorMessage)("Bodo Extension Error: Unable to get cluster list",e),this._clusterListErrorShown=!0)}}clusterListHasChanged(e,t){if(e.length!==t.length)return!0;e.sort(((e,t)=>e.uuid<t.uuid?-1:1)),t.sort(((e,t)=>e.uuid<t.uuid?-1:1));for(let n=0;n<e.length;n++)if(JSON.stringify(e[n])!==JSON.stringify(t[n]))return!0;return!1}async updateClusters(e=!1){const t=await this.getClustersList(e);this.clusterListHasChanged(this._clusters,t)&&(this._clusterChanged.emit({name:"cluster",oldValue:this._clusters,newValue:t}),this._clusters=t)}}var g=n(693),p=n(923),m=n(271),b=n.n(m),f=n(954);const w=({cluster:e,current:t=!1,callback:n})=>b().createElement("div",{className:(t?"current-cluster-option":"")+" bodo-cluster-dropdown-item",onClick:t?()=>!0:()=>n(e.uuid),key:e.uuid},b().createElement("div",null,b().createElement("span",{className:"cluster-name"},e.name),b().createElement("span",{className:"cluster-details"},"Bodo ",e.bodoVersion)),t&&b().createElement("button",{onClick:()=>n()},"Detach")),C=({cluster:e,forceUpdate:t})=>{const[n,s]=(0,m.useState)(!1);return b().createElement("div",{className:"bodo-cluster-dropdown-item paused-bodo-clusuter",key:e.uuid},b().createElement("div",null,b().createElement("span",{className:"cluster-name"},e.name),b().createElement("span",{className:"cluster-details"},"Bodo ",e.bodoVersion)),"PAUSED"!==e.status||n?b().createElement("div",{className:"cluster-select-resume-loading"},b().createElement(f.Grid,{ariaLabel:"loading-indicator",width:10,height:10})):b().createElement("div",{className:"cluster-select-resume-cluster",onClick:(o=e.uuid,async e=>{if(!confirm("Are you sure that you want to resume this cluster"))return!1;await u(o),t&&t(),s(!0),setTimeout((()=>s(!1)),5e3)})},b().createElement("svg",{width:"35",height:"47",viewBox:"0 0 35 47",fill:"none",xmlns:"http://www.w3.org/2000/svg"},b().createElement("path",{d:"M33.992 25.435C34.3029 25.2194 34.5571 24.9309 34.7327 24.5944C34.9083 24.2579 35 23.8834 35 23.5032C35 23.123 34.9083 22.7485 34.7327 22.412C34.5571 22.0754 34.3029 21.7869 33.992 21.5713L3.66075 0.419678C3.3109 0.174847 2.90114 0.0312738 2.47598 0.00455464C2.05081 -0.0221645 1.62651 0.0689923 1.24916 0.268124C0.871822 0.467255 0.555873 0.766742 0.335644 1.13405C0.115415 1.50135 -0.000670061 1.92243 9.40679e-07 2.35153L2.78982e-06 44.6548C0.00175831 45.0829 0.119337 45.5025 0.340093 45.8683C0.560849 46.2341 0.876431 46.5324 1.2529 46.7311C1.62937 46.9297 2.05248 47.0213 2.47674 46.9958C2.90099 46.9704 3.31034 46.8289 3.66075 46.5867L33.992 25.435Z",fill:"#5E5E5E"}))));var o},v=()=>b().createElement("svg",{height:"20",className:"bodo-select-chevron",width:"20",viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false"},b().createElement("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"})),E=({cluster:e,isProcessing:t})=>b().createElement(b().Fragment,null,b().createElement("div",{className:"bodo-currently-selected-dropdown"},t?b().createElement("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"}},b().createElement("span",null,"Loading..."),b().createElement("span",null,b().createElement(f.Grid,{ariaLabel:"loading-indicator",width:10,height:10}))):b().createElement(b().Fragment,null,b().createElement("span",null,e?e.name:"Detached"),b().createElement(v,null)))),x=({currentClusterUUID:e,myOnChange:t,clusters:n,clusterAttachloading:s,store:o})=>{const[r,a]=(0,m.useState)(!1),[l,i]=(0,m.useState)(!1),c=(0,m.useRef)(null),u=e=>n.find((t=>t.uuid===e)),d=(e,n)=>{i(!0),t(n?"0":e),setTimeout((()=>{i(!1)}),1e3),a(!1)},h=e=>{d(e,!1)},g=e=>{d(e,!0)},p=u(e),{current:f}=c;return!f||"RUNNING"!==f.status||p&&"RUNNING"===p.status||g("0"),c.current=p,b().createElement(b().Fragment,null,b().createElement("div",{className:"bodo-dropdown-container"},b().createElement("div",{onClick:()=>{a(!r)}},b().createElement(E,{cluster:e?u(e):null,isProcessing:l||s})),b().createElement("div",{className:"bodo-dropdown-list "+(r?"selecting":"")},0===n.length?b().createElement("div",{className:"bodo-dropdown-item"},b().createElement("div",null,b().createElement("span",{className:"cluster-name"},"No Clusters Available"))):b().createElement(b().Fragment,null,p?b().createElement(b().Fragment,null,b().createElement("div",{className:"bodo-drop-down-details"},"Attached Cluster:"),b().createElement(w,{cluster:p,current:!0,callback:g}),b().createElement("div",{className:"bodo-drop-down-details"},"Detach & Attach:")):b().createElement("div",{className:"bodo-drop-down-details"},"Attach:"),(()=>{const t=u(e);return n.filter((e=>"RUNNING"===e.status)).concat(n.filter((e=>"NEW"!==e.status&&"RUNNING"!==e.status))).filter((n=>!t||e!==n.uuid)).map((e=>"RUNNING"===e.status?b().createElement(w,{cluster:e,callback:h}):b().createElement(C,{forceUpdate:()=>o.forceUpdate(),cluster:e})))})()))))},y=({panel:e})=>{const{data:t}=(0,g.useQuery)(["catalogs"],(()=>(async()=>{try{return async function(){const e=await i("bodo/catalog?forceRefresh=True",{method:"GET"});if(e.e)throw new Error(e.e);return e.catalogs}()}catch(e){return console.error("Error fetching catalogs",e),[]}})()),{refetchInterval:6e4}),[n,s]=(0,m.useState)(!0),[o,r]=(0,m.useState)(void 0);return(0,m.useEffect)((()=>{e.context.ready.then((()=>{var t;s(!1),r(null===(t=e.model)||void 0===t?void 0:t.metadata.get("bodo-catalog"))}))}),[]),b().createElement("div",{className:"jp-HTMLSelect jp-DefaultStyle"},b().createElement("select",{style:{marginInline:"5px",color:"black"},disabled:n,onChange:t=>{var n,s,o,a;null===(n=e.model)||void 0===n||n.metadata.set("bodo-catalog",t.target.value);const l=null!==(o=null===(s=null==e?void 0:e.model)||void 0===s?void 0:s.cells.length)&&void 0!==o?o:0;for(let n=0;n<l;n++){const s=null===(a=null==e?void 0:e.model)||void 0===a?void 0:a.cells.get(n);null==s||s.metadata.set("bodo-catalog",t.target.value)}r(t.target.value)},value:o,placeholder:"Select catalog"},b().createElement("option",{value:"",selected:!o},"Select Catalog"),null==t?void 0:t.map((e=>b().createElement("option",{value:JSON.stringify(e)},e.name)))),b().createElement("span",{className:"f1ozlkqi"},b().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",viewBox:"0 0 18 18","data-icon":"ui-components:caret-down-empty"},b().createElement("g",{xmlns:"http://www.w3.org/2000/svg",className:"jp-icon3",fill:"#616161",shapeRendering:"geometricPrecision"},b().createElement("path",{d:"M5.2,5.9L9,9.7l3.8-3.8l1.2,1.2l-4.9,5l-4.9-5L5.2,5.9z"})))))};class L extends m.Component{constructor(e){super(e),this.state={clusters:e.store.clusters,currentClusterUUID:null,autoAttachState:null,clusterAttachloading:!1},this._tryAutoAttach()}componentDidMount(){this.props.store.clusterChaged.connect(this._onClusterUpdate,this),this.props.sessionContext.sessionChanged.connect(this._onSessionUpdate,this)}componentWillUnmount(){this.props.store.clusterChaged.disconnect(this._onClusterUpdate,this),this.props.sessionContext.sessionChanged.disconnect(this._onSessionUpdate,this)}_onSessionUpdate(e,t){var n,s;console.log("Detected Session Change.");const{clusters:o}=this.state;(null===(s=null===(n=t.newValue)||void 0===n?void 0:n._kernel)||void 0===s?void 0:s._name)?(console.debug("Session Change New Kernel Name: ",t.newValue._kernel._name),this.props.getClusterUUIDFromKernel(t.newValue._kernel._name).then((e=>{const t=o.find((t=>t.uuid===e));t&&"RUNNING"===t.status?(console.debug("Found cluster for this kernel: ",e),this.setState({currentClusterUUID:e})):(console.debug("Cluster not found or not running, setting currentClusterUUID to null."),this.setState({currentClusterUUID:null}))}),(e=>{console.error("Error while getting cluster UUID from kernel: ",e),console.error("Setting currentClusterUUID to null."),this.setState({currentClusterUUID:null})}))):(console.debug("Session has no kernel. Setting currentClusterUUID to null."),this.setState({currentClusterUUID:null}))}async _onClusterUpdate(e,t){const{currentClusterUUID:n}=this.state;let s;s=t.newValue?t.newValue:[];let o=n;n&&!s.map((e=>e.uuid)).includes(n)&&(o=null,(0,d.showErrorMessage)("Cluster not available anymore!","The cluster was removed or is being modified. Your session will be shutdown."),this.props.startKernelForCluster()),this.setState({clusters:s,currentClusterUUID:o}),this._tryAutoAttach()}async _tryAutoAttach(){const{clusters:e,currentClusterUUID:t,autoAttachState:n}=this.state;let s=n,o=t;const r=e.filter((e=>"RUNNING"===e.status));this.setState({clusterAttachloading:!0}),null===n&&(s=await async function(){const e=await i("bodo/autoattach",{method:"Get"});if(e.e)throw new Error(e.e);return e.auto_attach}()),!t&&1===r.length&&s&&this.props.startKernelForCluster(r[0].uuid).then((e=>{e&&(o=r[0].uuid)})),this.setState({currentClusterUUID:o,autoAttachState:s,clusterAttachloading:!1})}selectClusterCallback(e){console.debug("[onSelectCluster] clusterUUID: ",e),this.setState({clusterAttachloading:!0});const{startKernelForCluster:t}=this.props;"0"===e?(t(),this.setState({currentClusterUUID:null,clusterAttachloading:!1})):t(e).then((t=>{t?this.setState({currentClusterUUID:e,clusterAttachloading:!1}):this.setState({currentClusterUUID:null,clusterAttachloading:!1})}))}render(){const{clusters:e,currentClusterUUID:t,clusterAttachloading:n}=this.state;return m.createElement(x,{store:this.props.store,clusterAttachloading:n,myOnChange:this.selectClusterCallback.bind(this),clusters:e,currentClusterUUID:t})}}class k{constructor(e,t){this._store=e,this._catalog_mode=t,this._setCatalogMode()}async _setCatalogMode(){let e=this._catalog_mode;null===e&&(e=await c()),this._catalog_mode=e}createNew(e,t){const n=new g.QueryClient,s=d.ReactWidget.create(m.createElement(g.QueryClientProvider,{client:n},m.createElement(L,{store:this._store,startKernelForCluster:async e=>{if(!e)return console.log("No clusterUUID. Shutting session down..."),(async()=>(await t.sessionContext.shutdown(),!0))();let n;console.log("Starting Kernel for clusterUUID: ",e),console.debug("Contacting Jupyter Server App to start remote kernel for clusterUUID: ",e);try{n=await async function(e){const t=await i(`cluster-remote-ikernel/${e}`,{method:"POST"});if(t.e)throw new Error(t.e);return t.remote_kernel_name}(e)}catch(e){return console.error("Unable to register a remote kernel: ",e),(0,d.showErrorMessage)("Bodo Extension Error: Unable to create a remote kernel on the cluster.",e),!1}return console.log("Refreshing kernel specs and changing to remote kernel: ",n),await t.sessionContext.specsManager.refreshSpecs(),await t.sessionContext.changeKernel({name:n}),!0},getClusterUUIDFromKernel:async e=>{var n;if(console.debug("[getClusterUUIDFromKernel] kernelName: ",e),console.debug("[getClusterUUIDFromKernel] KernelSpecs: ",null===(n=t.sessionContext.specsManager.specs)||void 0===n?void 0:n.kernelspecs),t.sessionContext.specsManager.specs&&e in t.sessionContext.specsManager.specs.kernelspecs){const n=t.sessionContext.specsManager.specs.kernelspecs[e];if(n){const e=n.metadata;if(e&&"BodoClusterUUID"in e)return e.BodoClusterUUID}}return null},sessionContext:t.sessionContext}))),o=d.ReactWidget.create(m.createElement(g.QueryClientProvider,{client:n},m.createElement(y,{panel:e})));e.toolbar.insertItem(0,"clusterSelect",s);const r=this._catalog_mode;return r&&e.toolbar.insertItem(10,"catalogSelect",o),new p.DisposableDelegate((()=>{s.dispose(),r&&o.dispose()}))}}var N,_=n(165),S=n(199),U=n(849);!function(e){e.PARALLEL_PYTHON="Parallel-Python",e.PYTHON="Python",e.SQL="SQL"}(N||(N={}));const I={id:"jupyterlab-codecellselect:factory",provides:_.NotebookPanel.IContentFactory,requires:[S.IEditorServices],autoStart:!0,activate:(e,t)=>{const n=t.factoryService.newInlineEditor;return new A({editorFactory:n})}};class A extends _.NotebookPanel.ContentFactory{constructor(e){super(e),this._RENDER_HEADER=null,this._CATALOG_MODE=null,this._setCatalogMode()}get RENDER_HEADER(){return this._RENDER_HEADER}set RENDER_HEADER(e){this._RENDER_HEADER=e}async _setCatalogMode(){let e=this._CATALOG_MODE;null===e&&(e=await c()),this._CATALOG_MODE=e}createCellHeader(){return this.RENDER_HEADER?new D:new U.CellHeader}createCodeCell(e,t){var n;return this.RENDER_HEADER=this._CATALOG_MODE,this._CATALOG_MODE?new j(e,null===(n=t.model)||void 0===n?void 0:n.metadata.get("bodo-catalog")):new U.CodeCell(e)}createMarkdownCell(e,t){return this.RENDER_HEADER=!1,super.createMarkdownCell(e,t)}createRawCell(e,t){return this.RENDER_HEADER=!1,super.createRawCell(e,t)}}class j extends U.CodeCell{constructor(e,t){super(e),this.outputFooterNode=null,this.setMimeType=this.setMimeType.bind(this);const n=this.getCellHeader();if(n){n.getLangChanged().connect(this.setLangMetadata,this);const e=this.model.metadata.get("lang")||N.PARALLEL_PYTHON;n.setLang(e),this.ready.then((()=>this.setMimeType(this.getMimeTypeFromLang(e))))}this.ready.then((()=>this.model.metadata.set("bodo-catalog",t)))}getMimeTypeFromLang(e){return e===N.SQL?"text/x-sql":"text/x-python"}setLangMetadata(e,t){this.model.metadata.set("lang",t),this.setMimeType(this.getMimeTypeFromLang(t))}setOutputMetadata(e,t){this.model.metadata.set("output",t)}setMimeType(e){this.editorWidget.model.mimeType=e}getCellHeader(){let e=null;const t=this.children();for(let n=t.next();n;n=t.next())if(n.hasClass("jp-Cell-header")){e=n;break}return e}}class D extends d.ReactWidget{constructor(){super(),this._langChanged=new r.Signal(this),this._isSelectingSignal=new r.Signal(this),this._lang=N.PARALLEL_PYTHON,this._output="",this._isSelecting=!1,this.handleToggle=this.handleToggle.bind(this),this.setLangParallelPython=this.setLangParallelPython.bind(this),this.setLangPython=this.setLangPython.bind(this),this.setLangSQL=this.setLangSQL.bind(this),this.setLang=this.setLang.bind(this)}handleToggle(){this._isSelecting=!this._isSelecting,this._isSelectingSignal.emit(this._isSelecting)}setLangParallelPython(){this._lang=N.PARALLEL_PYTHON,this._langChanged.emit(this._lang),this.handleToggle()}setLangPython(){this._lang=N.PYTHON,this._langChanged.emit(this._lang),this.handleToggle()}setLangSQL(){this._lang=N.SQL,this._langChanged.emit(this._lang),this.handleToggle()}setLang(e){this._lang=e,this._langChanged.emit(e)}getLangChanged(){return this._langChanged}render(){return b().createElement("select",{style:{border:"none",background:"#A0B2DB",color:"black",position:"absolute",height:"17px",fontSize:"12px",zIndex:998,right:"0px",top:"-17px"},onChange:e=>{this._lang=e.target.value,this._langChanged.emit(this._lang),this.handleToggle()}},b().createElement(d.UseSignal,{signal:this._langChanged,initialArgs:this._lang},((e,t)=>b().createElement(b().Fragment,null,b().createElement("option",{value:N.PARALLEL_PYTHON,selected:N.PARALLEL_PYTHON===t},"Parallel-Python"),b().createElement("option",{value:N.SQL,selected:N.SQL===t},"SQL"),b().createElement("option",{value:N.PYTHON,selected:N.PYTHON===t},"Python")))))}}var R=n(379),M=n.n(R),T=n(760);M()(T.Z,{insert:"head",singleton:!1}),T.Z.locals;var P=n(978);const H=({clusterStatus:e,uuid:t,startLoading:n,loading:s,forceUpdate:o})=>{return"RUNNING"!==e&&"PAUSED"!==e||s?b().createElement("span",null,b().createElement(f.Grid,{ariaLabel:"loading-indicator",width:10,height:10})):b().createElement("div",{className:"bodo-cluster-list-pause-unpause",onClick:"RUNNING"===e?(r=t,async e=>{if(!confirm("Are you sure that you want to pause this cluster? Make sure not to pause clusters while the kernel is connecting."))return!1;await async function(e){try{await i(`bodo/cluster/${e}/pause`,{method:"Put"})}catch(e){throw new Error(e)}}(r),n("PAUSING"),o()}):(e=>async t=>{if(!confirm("Are you sure that you want to resume this cluster"))return!1;await u(e),n("RESUMING"),o()})(t)},"RUNNING"===e?b().createElement("svg",{width:"31",height:"46",viewBox:"0 0 31 46",fill:"none",xmlns:"http://www.w3.org/2000/svg"},b().createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5 0C7.76143 0 10 2.23858 10 5L10 41C10 43.7614 7.76142 46 5 46C2.23858 46 0 43.7614 0 41L1.43051e-06 5C1.90735e-06 2.23858 2.23858 0 5 0ZM26 0C28.7614 0 31 2.23858 31 5L31 41C31 43.7614 28.7614 46 26 46C23.2386 46 21 43.7614 21 41L21 5C21 2.23858 23.2386 0 26 0Z",fill:"#5E5E5E"})):b().createElement("svg",{width:"35",height:"47",viewBox:"0 0 35 47",fill:"none",xmlns:"http://www.w3.org/2000/svg"},b().createElement("path",{d:"M33.992 25.435C34.3029 25.2194 34.5571 24.9309 34.7327 24.5944C34.9083 24.2579 35 23.8834 35 23.5032C35 23.123 34.9083 22.7485 34.7327 22.412C34.5571 22.0754 34.3029 21.7869 33.992 21.5713L3.66075 0.419678C3.3109 0.174847 2.90114 0.0312738 2.47598 0.00455464C2.05081 -0.0221645 1.62651 0.0689923 1.24916 0.268124C0.871822 0.467255 0.555873 0.766742 0.335644 1.13405C0.115415 1.50135 -0.000670061 1.92243 9.40679e-07 2.35153L2.78982e-06 44.6548C0.00175831 45.0829 0.119337 45.5025 0.340093 45.8683C0.560849 46.2341 0.876431 46.5324 1.2529 46.7311C1.62937 46.9297 2.05248 47.0213 2.47674 46.9958C2.90099 46.9704 3.31034 46.8289 3.66075 46.5867L33.992 25.435Z",fill:"#5E5E5E"})));var r},z=({status:e})=>b().createElement("div",{className:`cluster-status ${e.toLowerCase()}`},e);function O(e){const{cluster:t,forceUpdate:n}=e,[s,o]=m.useState(!1),[r,a]=m.useState("");return m.createElement("li",{className:"bodo-ClusterListingItem","data-cluster-id":t.uuid,key:t.uuid},m.createElement("div",{className:"bodo-ClusterListingItem-title"},t.name),m.createElement("div",null,t.uuid),m.createElement("div",{className:"bodo-ClusterListingItem-stats"},m.createElement("span",{className:"bodo-ClusterListingItem-stats-name"},"Instances:")," ",t.workersQuantity),m.createElement("div",{className:"bodo-ClusterListingItem-stats"},m.createElement("span",{className:"bodo-ClusterListingItem-stats-name"},"Instance Type:")," ",t.instanceType),m.createElement("div",{className:"bodo-ClusterListingItem-stats"},m.createElement("span",{className:"bodo-ClusterListingItem-stats-name"},"Bodo Version:")," ",t.bodoVersion),m.createElement("div",{className:"bodo-ClusterListingItem-status-and-pause"},m.createElement("div",{className:"bodo-ClusterListingItem-stats"},m.createElement("span",{className:"bodo-ClusterListingItem-stats-name"},"Status:")," ",m.createElement(z,{status:r||t.status})),m.createElement(H,{forceUpdate:()=>n(),startLoading:e=>{o(!0),a(e),setTimeout((()=>{o(!1),a("")}),5e3)},loading:s,uuid:t.uuid,clusterStatus:t.status})))}function B(e){return m.createElement("li",{className:"bodo-ClusterListingItem"},m.createElement("div",{className:"bodo-ClusterListingItem-title"},"No Clusters"))}class G extends m.Component{constructor(e){super(e),this.state={clusters:e.store.clusters}}componentDidMount(){this.props.store.clusterChaged.connect(this._onClusterUpdate,this)}componentWillUnmount(){this.props.store.clusterChaged.disconnect(this._onClusterUpdate,this)}async forceUpdate(){await this.props.store.forceUpdate()}_onClusterUpdate(e,t){let n;n=t.newValue?t.newValue:[],this.setState({clusters:n})}render(){const{clusters:e}=this.state;let t;const n=e.filter((e=>"RUNNING"===e.status)).concat(e.filter((e=>"NEW"!==e.status&&"RUNNING"!==e.status)));return t=e.length>0?n.map((e=>m.createElement(O,{forceUpdate:()=>this.forceUpdate(),cluster:e}))):m.createElement(B,null),m.createElement("div",{className:"bodo-ClusterManager"},m.createElement("div",{className:"bodo-ClusterListing"},m.createElement("h2",null,"Bodo Clusters"),m.createElement("ul",{className:"bodo-ClusterListing-list"},t)))}}class F extends d.ReactWidget{constructor(e){super(),this.addClass("bodo-Sidebar"),this._store=e}render(){return m.createElement("div",null,m.createElement(G,{store:this._store}))}}const q=[{id:"bodo-labextension:plugin",autoStart:!0,requires:[s.ILabShell],activate:(e,t)=>{console.log("Bodo JupyterLab extension activated!");const n=new h;e.docRegistry.addWidgetExtension("Notebook",new k(n,null));const s=new F(n);s.id="bodo-cluster-list",s.title.icon=new P.LabIcon({name:"bodo_jupyterlab:logo",svgstr:'<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" width="1081" height="1081" viewBox="0 0 1081 1081"><defs><style>.cls-1{fill:#1db100;}</style></defs><title>Bodo-Platform</title><path class="cls-1" d="M541,427.5a239.62,239.62,0,0,1,95,19.12A247.7,247.7,0,0,1,767.64,578.23a239.79,239.79,0,0,1,19.11,95q0,51.35-19.11,95.57A249.19,249.19,0,0,1,636,899.88,239.45,239.45,0,0,1,541,919q-51.35,0-95.57-19.12A250.7,250.7,0,0,1,314.36,768.82q-19.11-44.24-19.11-95.57V193.77q0-14.19,9.83-23.48A32.4,32.4,0,0,1,328,161a30.57,30.57,0,0,1,22.39,9.29q9.25,9.28,9.28,23.48V508.33q30.57-32.77,66.63-51.34A247,247,0,0,1,482,435.15a234.51,234.51,0,0,1,59-7.65m0,427.06a177.8,177.8,0,0,0,70.45-14.2,181,181,0,0,0,96.66-96.11q14.17-32.78,14.2-71a178.15,178.15,0,0,0-14.2-70.45,179.61,179.61,0,0,0-96.66-96.66,181.86,181.86,0,0,0-140.9,0,179.61,179.61,0,0,0-96.66,96.66,177.8,177.8,0,0,0-14.2,70.45q0,38.25,14.2,71a183.42,183.42,0,0,0,38.77,57.34,181.58,181.58,0,0,0,57.89,38.77A177.7,177.7,0,0,0,541,854.56"/></svg>'}),s.title.caption="Bodo Clusters",t.add(s,"left",{rank:200})}},I]},150:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var s=n(645),o=n.n(s)()((function(e){return e[1]}));o.push([e.id,".myButton.jp-Button.minimal .jp-Icon {\n  color: grey;\n}\n\n",""]);const r=o},760:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var s=n(645),o=n.n(s),r=n(150),a=n(667),l=n.n(a),i=n(490),c=n.n(i),u=n(935),d=n.n(u),h=o()((function(e){return e[1]}));h.i(r.Z);var g=l()(c()),p=l()(d());h.push([e.id,"/*\n* Copied from IPyParallel\n*/\n\n:root {\n  --bodo-launch-button-height: 24px;\n}\n\n/**\n   * Rules related to the overall sidebar panel.\n   */\n\n.bodo-Sidebar {\n  background: var(--jp-layout-color1);\n  color: var(--jp-ui-font-color1);\n  font-size: var(--jp-ui-font-size1);\n  overflow: auto;\n}\n\n/**\n   * Rules related to the cluster manager.\n   */\n\n.bodo-ClusterManager {\n}\n\n.bodo-ClusterManager .jp-Toolbar {\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n}\n\n.bodo-ClusterManager .jp-Toolbar .bodo-ClusterManager-label {\n  -webkit-box-flex: 0;\n  -ms-flex: 0 0 auto;\n  flex: 0 0 auto;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 1px;\n  font-size: var(--jp-ui-font-size0);\n  padding: 8px 8px 8px 12px;\n  margin: 0px;\n}\n\n.bodo-ClusterManager button.jp-Button > span {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n  -ms-flex-direction: row;\n  flex-direction: row;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n}\n\n.bodo-ClusterListing ul.bodo-ClusterListing-list {\n  list-style-type: none;\n  padding: 0;\n  margin: 0;\n}\n\n.bodo-ClusterListing h2 {\n  padding: 8px 12px;\n  font-size: 14px;\n  letter-spacing: 0.1em;\n  text-transform: uppercase;\n  margin: unset;\n  color: #333333;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n  -ms-flex-pack: justify;\n  justify-content: space-between;\n  border-bottom: var(--jp-border-width) solid var(--jp-toolbar-border-color);\n  -webkit-box-shadow: var(--jp-toolbar-box-shadow);\n  box-shadow: var(--jp-toolbar-box-shadow);\n}\n\n.bodo-ClusterListingItem {\n  display: inline-block;\n  list-style-type: none;\n  padding: 8px;\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n  -o-text-overflow: ellipsis;\n  text-overflow: ellipsis;\n}\n\n.bodo-ClusterListingItem-drag {\n  opacity: 0.7;\n  color: var(--jp-ui-font-color1);\n  cursor: -webkit-grabbing;\n  cursor: grabbing;\n  max-width: 260px;\n  -webkit-transform: translateX(-50%) translateY(-50%);\n  -ms-transform: translateX(-50%) translateY(-50%);\n  transform: translateX(-50%) translateY(-50%);\n}\n\n.bodo-ClusterListingItem-title {\n  margin: 0px;\n  font-size: var(--jp-ui-font-size2);\n  font-weight: 500;\n}\n.bodo-ClusterListingItem-stats {\n  font-weight: 300;\n}\n.bodo-ClusterListingItem-stats-name {\n  font-weight: 500;\n}\n.bodo-ClusterListingItem-link a {\n  text-decoration: none;\n  color: var(--jp-content-link-color);\n}\n\n.bodo-ClusterListingItem-link a:hover {\n  text-decoration: underline;\n}\n\n.bodo-ClusterListingItem-link a:visited {\n  color: var(--jp-content-link-color);\n}\n\n.bodo-ClusterListingItem:hover {\n  background: var(--jp-layout-color2);\n}\n\n.bodo-ClusterListingItem.jp-mod-active {\n  color: white;\n  background: var(--jp-brand-color0);\n}\n\n.bodo-ClusterListingItem.jp-mod-active a,\n.bodo-ClusterListingItem.jp-mod-active a:visited {\n  color: white;\n}\n\n.bodo-ClusterListingItem button.jp-mod-styled {\n  background-color: transparent;\n}\n\n.bodo-ClusterListingItem button.jp-mod-styled:hover {\n  background-color: var(--jp-layout-color3);\n}\n\n.bodo-ClusterListingItem.jp-mod-active button.jp-mod-styled:hover {\n  background-color: var(--jp-brand-color1);\n}\n\n.bodo-ClusterListingItem-button-panel {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-line-pack: center;\n  align-content: center;\n}\n\nbutton.bodo-ClusterListingItem-stop {\n  color: var(--jp-warn-color1);\n  font-weight: 600;\n}\n\nbutton.bodo-ClusterListingItem-scale {\n  color: var(--jp-accent-color1);\n  font-weight: 600;\n}\n\nbutton.bodo-ClusterListingItem-start {\n  color: var(--jp-accent-color1);\n  font-weight: 600;\n}\n\nbutton.bodo-hidden {\n  display: none;\n}\n\n.bodo-ClusterListingItem button.bodo-ClusterListingItem-code.jp-mod-styled {\n  margin: 0 4px 0 4px;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n\n/**\n   * Rules for the scaling dialog.\n   */\n\n.bodo-DialogHeader {\n  font-size: var(--jp-ui-font-size2);\n}\n\n.bodo-DialogSection {\n  margin-left: 24px;\n}\n\n.bodo-DialogSection-item {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -ms-flex-pack: distribute;\n  justify-content: space-around;\n  margin: 12px 0 12px 0;\n}\n\n.bodo-DialogHeader input[type='checkbox'] {\n  position: relative;\n  top: 4px;\n  left: 4px;\n  margin: 0 0 0 8px;\n}\n\n.bodo-DialogSection input[type='number'] {\n  width: 72px;\n}\n\n.bodo-DialogSection-label.bodo-mod-disabled {\n  color: var(--jp-ui-font-color3);\n}\n\n.bodo-DialogSection input[type='number']:disabled {\n  color: var(--jp-ui-font-color3);\n}\n\n.bodo-cluster-list-pause-unpause svg {\n  height: 24px;\n  cursor: pointer;\n}\n\n.bodo-cluster-list-pause-unpause path {\n  fill: #1db100;\n}\n\n.cluster-status {\n  display: inline-block;\n  padding: 2px 12px;\n  font-size: 12px;\n  text-transform: uppercase;\n  border-radius: 40px;\n  background-color: #607d8b;\n  color: #fff !important;\n  font-weight: bold;\n}\n.cluster-status.running {\n  background-color: #34b100 !important;\n}\n.cluster-status.new {\n  background-color: #58aafd !important;\n}\n.cluster-status.new,\n.cluster-status.inprogress,\n.cluster-status.pending,\n.cluster-status.scaling,\n.cluster-status.readinessprobe,\n.cluster-status.terminating {\n  background-color: #ecc817 !important;\n}\n.bodo-ClusterListingItem-status-and-pause {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-right: 1rem;\n}\n.bodo-ClusterListingItem-status-and-pause svg {\n  height: 24px !important;\n  width: 24px !important;\n}\n/**\n   * Rules for the logos.\n   */\n\n.bodo-SearchIcon {\n  background-image: var(--jp-icon-search);\n}\n\n[data-jp-theme-light='true'] .bodo-CodeIcon {\n  background-image: url("+g+");\n}\n\n[data-jp-theme-light='false'] .bodo-CodeIcon {\n  background-image: url("+p+");\n}\n\n.bodo-ClusterListingItem.jp-mod-active .bodo-CodeIcon {\n  background-image: url("+p+");\n}\n.jp-Toolbar {\n  z-index: 4;\n}\n.bodo-dropdown-container {\n  position: relative;\n  user-select: none;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  height: 24px;\n}\n.bodo-currently-selected-dropdown {\n  border: 1px solid #616161;\n  color: black;\n  width: 200px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  border-radius: 4px;\n  padding: 0 4px;\n  height: 24px;\n  -webkit-box-pack: justify;\n  -ms-flex-pack: justify;\n  justify-content: space-between;\n  background: var(--jp-layout-color1);\n}\n\n.bodo-currently-selected-cluster span {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.bodo-select-chevron {\n  cursor: pointer;\n  fill: #616161;\n}\n\n.bodo-dropdown-list,\n.bodo-cluster-select-list {\n  display: none;\n  position: fixed;\n  background-color: white;\n  border: 1px solid #616161;\n  width: 400px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  z-index: 999;\n  max-height: 400px;\n  overflow: scroll;\n  transform: translate3d(0, 0, 0);\n}\n.bodo-dropdown-list > div {\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  display: flex;\n  padding: 4px;\n  justify-content: space-between;\n}\n.bodo-dropdown-list > div:not(.bodo-drop-down-details) {\n  cursor: pointer;\n}\n\n.bodo-dropdown-list > div:not(.bodo-drop-down-details):not(.current-cluster-option):hover {\n  background-color: rgb(236, 236, 236);\n}\n.bodo-dropdown-list > div.current-cluster-option {\n  background-color: #eaf6ff;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  cursor: default;\n  -webkit-box-pack: justify;\n  -ms-flex-pack: justify;\n  justify-content: space-between;\n}\n.bodo-dropdown-list > div:not(:last-child) {\n  border-bottom: 1px dotted gray;\n}\n.current-cluster-option button {\n  border: 0;\n  padding: 8px;\n  background-color: transparent;\n  color: #2374bb;\n  cursor: pointer;\n}\n.bodo-cluster-dropdown-item.paused-bodo-clusuter {\n  background-color: #f2f2f2;\n  cursor: default !important;\n}\n.bodo-cluster-dropdown-item.paused-bodo-clusuter svg {\n  height: 20px;\n  width: 20px;\n}\n.cluster-select-resume-cluster svg {\n  cursor: pointer !important;\n}\n.cluster-select-resume-loading svg {\n  cursor: default !important;\n}\n.cluster-select-resume-loading,\n.cluster-select-resume-cluster {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.cluster-select-resume-loading svg {\n  width: 20px;\n}\n.bodo-cluster-dropdown-item.paused-bodo-clusuter svg path {\n  fill: #1db100;\n}\n.cluster-name {\n  line-height: 1;\n}\n.cluster-details {\n  display: block;\n  line-height: 1;\n}\n.bodo-dropdown-item > div {\n  line-height: 1.2;\n}\n\n.bodo-dropdown-list.selecting,\n.bodo-cluster-select-list.selecting {\n  display: block;\n}\n\n.bodo-drop-down-details {\n  font-weight: 600;\n  line-height: 1;\n}\n\n.jp-Cell-header {\n  overflow: visible;\n}\n\n.bodo-header-textbox {\n  display: none;\n}\n\n.bodo-header-textbox.visible {\n  display: block;\n}\n\n.jp-CodeCell {\n  margin-top: 12px;\n}\n\n",""]);const m=h},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,s){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(s)for(var r=0;r<this.length;r++){var a=this[r][0];null!=a&&(o[a]=!0)}for(var l=0;l<e.length;l++){var i=[].concat(e[l]);s&&o[i[0]]||(n&&(i[2]?i[2]="".concat(n," and ").concat(i[2]):i[2]=n),t.push(i))}},t}},667:e=>{"use strict";e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},379:(e,t,n)=>{"use strict";var s,o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),r=[];function a(e){for(var t=-1,n=0;n<r.length;n++)if(r[n].identifier===e){t=n;break}return t}function l(e,t){for(var n={},s=[],o=0;o<e.length;o++){var l=e[o],i=t.base?l[0]+t.base:l[0],c=n[i]||0,u="".concat(i," ").concat(c);n[i]=c+1;var d=a(u),h={css:l[1],media:l[2],sourceMap:l[3]};-1!==d?(r[d].references++,r[d].updater(h)):r.push({identifier:u,updater:m(h,t),references:1}),s.push(u)}return s}function i(e){var t=document.createElement("style"),s=e.attributes||{};if(void 0===s.nonce){var r=n.nc;r&&(s.nonce=r)}if(Object.keys(s).forEach((function(e){t.setAttribute(e,s[e])})),"function"==typeof e.insert)e.insert(t);else{var a=o(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,n,s){var o=n?"":s.media?"@media ".concat(s.media," {").concat(s.css,"}"):s.css;if(e.styleSheet)e.styleSheet.cssText=u(t,o);else{var r=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r)}}function h(e,t,n){var s=n.css,o=n.media,r=n.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleSheet)e.styleSheet.cssText=s;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(s))}}var g=null,p=0;function m(e,t){var n,s,o;if(t.singleton){var r=p++;n=g||(g=i(t)),s=d.bind(null,n,r,!1),o=d.bind(null,n,r,!0)}else n=i(t),s=h.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return s(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;s(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===s&&(s=Boolean(window&&document&&document.all&&!window.atob)),s));var n=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var s=0;s<n.length;s++){var o=a(n[s]);r[o].references--}for(var i=l(e,t),c=0;c<n.length;c++){var u=a(n[c]);0===r[u].references&&(r[u].updater(),r.splice(u,1))}n=i}}}},935:e=>{e.exports="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23E0E0E0' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='none' d='M0 0h24v24H0V0z'/%3E%3Cpath d='M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z'/%3E%3C/svg%3E"},490:e=>{e.exports="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23616161' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='none' d='M0 0h24v24H0V0z'/%3E%3Cpath d='M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z'/%3E%3C/svg%3E"}}]);