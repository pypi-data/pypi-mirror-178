!function(){var t={7747:function(t,e,n){var i=n(7537),o=n(3645)(i);o.push([t.id,".clear-btn[data-v-7deb4ea3],.search-btn[data-v-7deb4ea3]{background-color:#1a252f !important;transition:none}.custom-input[data-v-7deb4ea3]{background-color:#1a252f;border:none;box-shadow:none;cursor:pointer;-webkit-appearance:none}.dropdown.show .custom-input[data-v-7deb4ea3],.dropdown.show .clear-btn[data-v-7deb4ea3],.dropdown.show .search-btn[data-v-7deb4ea3]{background-color:#fff !important}.dropdown-item[data-v-7deb4ea3]{white-space:normal;word-break:break-all}.font-sm[data-v-7deb4ea3]{font-size:90%}.input-group-append-content[data-v-7deb4ea3]{background-color:#fff;border:none;color:#aab7b8;padding-left:.75rem !important;padding-right:.75rem !important}.responsive-width[data-v-7deb4ea3]{width:200px}@media(min-width: 1200px){.responsive-width[data-v-7deb4ea3]{width:300px}}","",{version:3,sources:["webpack://./kadi/assets/scripts/components/local/base/QuickSearch.vue"],names:[],mappings:"AACA,yDACE,mCAAA,CACA,eAAA,CAGF,+BACE,wBAAA,CACA,WAAA,CACA,eAAA,CACA,cAAA,CACA,uBAAA,CAIA,qIACE,gCAAA,CAIJ,gCACE,kBAAA,CACA,oBAAA,CAGF,0BACE,aAAA,CAGF,6CACE,qBAAA,CACA,WAAA,CACA,aAAA,CACA,8BAAA,CACA,+BAAA,CAGF,mCACE,WAAA,CAEA,0BAHF,mCAII,WAAA,CAAA",sourcesContent:["\n.clear-btn, .search-btn {\n  background-color: #1a252f !important;\n  transition: none;\n}\n\n.custom-input {\n  background-color: #1a252f;\n  border: none;\n  box-shadow: none;\n  cursor: pointer;\n  -webkit-appearance: none;\n}\n\n.dropdown.show {\n  .custom-input, .clear-btn, .search-btn {\n    background-color: white !important;\n  }\n}\n\n.dropdown-item {\n  white-space: normal;\n  word-break: break-all;\n}\n\n.font-sm {\n  font-size: 90%;\n}\n\n.input-group-append-content {\n  background-color: white;\n  border: none;\n  color: #aab7b8;\n  padding-left: 0.75rem !important;\n  padding-right: 0.75rem !important;\n}\n\n.responsive-width {\n  width: 200px;\n\n  @media (min-width: 1200px) {\n    width: 300px;\n  }\n}\n"],sourceRoot:""}]),t.exports=o},3645:function(t){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,o,s){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(i)for(var r=0;r<this.length;r++){var c=this[r][0];null!=c&&(a[c]=!0)}for(var d=0;d<t.length;d++){var l=[].concat(t[d]);i&&a[l[0]]||(void 0!==s&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=s),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),e.push(l))}},e}},7537:function(t){"use strict";t.exports=function(t){var e=t[1],n=t[3];if(!n)return e;if("function"==typeof btoa){var i=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),s="/*# ".concat(o," */"),a=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}));return[e].concat(a).concat([s]).join("\n")}return[e].join("\n")}},7409:function(t,e,n){var i=n(7747);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals),(0,n(5346).Z)("7b47beba",i,!1,{})},5346:function(t,e,n){"use strict";function i(t,e){for(var n=[],i={},o=0;o<e.length;o++){var s=e[o],a=s[0],r={id:t+":"+o,css:s[1],media:s[2],sourceMap:s[3]};i[a]?i[a].parts.push(r):n.push(i[a]={id:a,parts:[r]})}return n}n.d(e,{Z:function(){return h}});var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var s={},a=o&&(document.head||document.getElementsByTagName("head")[0]),r=null,c=0,d=!1,l=function(){},u=null,p="data-vue-ssr-id",f="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(t,e,n,o){d=n,u=o||{};var a=i(t,e);return m(a),function(e){for(var n=[],o=0;o<a.length;o++){var r=a[o];(c=s[r.id]).refs--,n.push(c)}for(e?m(a=i(t,e)):a=[],o=0;o<n.length;o++){var c;if(0===(c=n[o]).refs){for(var d=0;d<c.parts.length;d++)c.parts[d]();delete s[c.id]}}}}function m(t){for(var e=0;e<t.length;e++){var n=t[e],i=s[n.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](n.parts[o]);for(;o<n.parts.length;o++)i.parts.push(g(n.parts[o]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{var a=[];for(o=0;o<n.parts.length;o++)a.push(g(n.parts[o]));s[n.id]={id:n.id,refs:1,parts:a}}}}function v(){var t=document.createElement("style");return t.type="text/css",a.appendChild(t),t}function g(t){var e,n,i=document.querySelector("style["+p+'~="'+t.id+'"]');if(i){if(d)return l;i.parentNode.removeChild(i)}if(f){var o=c++;i=r||(r=v()),e=b.bind(null,i,o,!1),n=b.bind(null,i,o,!0)}else i=v(),e=C.bind(null,i),n=function(){i.parentNode.removeChild(i)};return e(t),function(i){if(i){if(i.css===t.css&&i.media===t.media&&i.sourceMap===t.sourceMap)return;e(t=i)}else n()}}var w,A=(w=[],function(t,e){return w[t]=e,w.filter(Boolean).join("\n")});function b(t,e,n,i){var o=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=A(e,o);else{var s=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(s,a[e]):t.appendChild(s)}}function C(t,e){var n=e.css,i=e.media,o=e.sourceMap;if(i&&t.setAttribute("media",i),u.ssrId&&t.setAttribute(p,e.id),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var s=e[i]={id:i,exports:{}};return t[i](s,s.exports,n),s.exports}n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){"use strict";var t=function(){var t=this,e=t._self._c;return t.showBroadcastMsg?e("div",{staticClass:"card"},[e("div",{staticClass:"card-body pb-1"},[e("button",{staticClass:"close text-primary",attrs:{type:"button"},on:{click:t.dismissBroadcast}},[e("i",{staticClass:"fa-solid fa-xmark fa-xs"})]),t._v(" "),e("markdown-preview",{attrs:{input:t.message}})],1)]):t._e()};function e(t,e,n,i,o,s,a,r){var c,d="function"==typeof t?t.options:t;if(e&&(d.render=e,d.staticRenderFns=n,d._compiled=!0),i&&(d.functional=!0),s&&(d._scopeId="data-v-"+s),a?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},d._ssrRegister=c):o&&(c=r?function(){o.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:o),c)if(d.functional){d._injectStyles=c;var l=d.render;d.render=function(t,e){return c.call(e),l(t,e)}}else{var u=d.beforeCreate;d.beforeCreate=u?[].concat(u,c):[c]}return{exports:t,options:d}}t._withStripped=!0;var i=e({data(){return{storageKey:"hide_broadcast_msg",showBroadcastMsg:!1}},props:{message:String,hash:String},methods:{dismissBroadcast(){window.localStorage.setItem(this.storageKey,this.hash),this.showBroadcastMsg=!1}},mounted(){""===this.message?window.localStorage.removeItem(this.storageKey):window.localStorage.getItem(this.storageKey)!==this.hash&&(window.localStorage.removeItem(this.storageKey),this.showBroadcastMsg=!0)}},t,[],!1,null,null,null).exports,o=function(){var t=this,e=t._self._c;return t.active?e("div",[e("div",{staticClass:"alert fade show",class:`alert-${t.type}`},[t.icon?e("i",{staticClass:"fa",class:`fa-${t.icon}`}):t._e(),t._v(" "+t._s(t.message)+"\n  ")])]):t._e()};o._withStripped=!0;var s=e({data(){return{icon:null,active:!0}},props:{message:String,type:{type:String,default:"info"},timeout:{type:Number,default:5e3}},mounted(){"info"===this.type?this.icon="circle-info":"danger"===this.type?this.icon="circle-xmark":"warning"===this.type?this.icon="triangle-exclamation":"success"===this.type&&(this.icon="circle-check"),null!==this.timeout&&window.setTimeout((()=>this.active=!1),this.timeout)}},o,[],!1,null,null,null).exports,a=function(){var t=this,e=t._self._c;return e("div",{ref:"toast",staticClass:"toast mw-100",attrs:{"data-animation":"false","data-autohide":"false","data-delay":"0"}},[e("div",{staticClass:"toast-header bg-primary"},[e("span",{staticClass:"mr-auto"},[t._v(t._s(t.notification.data.title))]),t._v(" "),e("button",{staticClass:"ml-2 close text-white",attrs:{type:"button"},on:{click:function(e){return t.dismiss(t.notification)}}},[e("i",{staticClass:"fa-solid fa-xmark fa-xs"})])]),t._v(" "),e("div",{staticClass:"toast-body py-2"},[e("div",{staticClass:"wb-break-all",domProps:{innerHTML:t._s(t.notification.data.body)}}),t._v(" "),e("div",{staticClass:"mt-1"},[e("small",{staticClass:"text-muted"},[e("from-now",{attrs:{timestamp:t.notification.created_at}})],1)])])])};a._withStripped=!0;var r=e({props:{notification:Object},methods:{dismiss(){axios.delete(this.notification._actions.dismiss).then((()=>{$(this.$refs.toast).toast("dispose"),kadi.getNotifications()})).catch((t=>kadi.alerts.danger($t("Error dismissing notification."),{request:t.request})))}},mounted(){$(this.$refs.toast).toast("show")},beforeDestroy(){$(this.$refs.toast).toast("dispose")}},a,[],!1,null,null,null).exports,c=function(){var t=this,e=t._self._c;return e("div",{staticClass:"dropdown",class:{show:t.dropdownActive},attrs:{id:`dropdown-${t.id}`}},[e("div",{staticClass:"input-group input-group-sm responsive-width",on:{click:t.showDropdown}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],ref:"input",staticClass:"form-control custom-input",attrs:{placeholder:t.$t("Quick search")},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}}),t._v(" "),t.query?e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-sm clear-btn input-group-append-content",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.clearQuery.apply(null,arguments)}}},[e("i",{staticClass:"fa-solid fa-xmark"})])]):e("div",{staticClass:"input-group-append"},[t._m(0)])]),t._v(" "),e("div",{staticClass:"dropdown-menu responsive-width p-0 mt-2",class:{"d-block":t.dropdownActive}},[t.initialized?e("div",[0===t.items.length?e("div",{staticClass:"px-2 my-1"},[e("strong",{staticClass:"text-muted font-sm"},[t._v(t._s(t.$t("No results.")))])]):t._l(t.items,(function(n,i){return e("div",{key:n._links.view},[e("a",{staticClass:"dropdown-item p-2",attrs:{href:n._links.view}},[e("div",{staticClass:"d-flex justify-content-between"},[e("strong",{staticClass:"font-sm"},[t._v("@"+t._s(n.identifier))]),t._v(" "),e("div",[e("span",{staticClass:"badge badge-light border border-muted font-weight-normal ml-3"},[t._v("\n                "+t._s(n.pretty_type)+"\n              ")])])]),t._v(" "),e("small",[t._v("\n            "+t._s(t.$t("Last modified"))+" "),e("from-now",{attrs:{timestamp:n.last_modified}})],1)]),t._v(" "),i<t.items.length-1?e("div",{staticClass:"dropdown-divider m-0"}):t._e()])}))],2):t._e(),t._v(" "),t.initialized?t._e():e("i",{staticClass:"fa-solid fa-circle-notch fa-spin text-muted p-2"})])])};c._withStripped=!0;var d={data(){return{id:kadi.utils.randomAlnum(),query:"",items:[],dropdownActive:!1,initialized:!1,searchTimeoutHandle:null}},props:{endpoint:String},watch:{query(){this.search()}},methods:{search(){window.clearTimeout(this.searchTimeoutHandle),this.searchTimeoutHandle=window.setTimeout((()=>{axios.get(`${this.endpoint}?query=${this.query}`).then((t=>{this.items=t.data,this.initialized=!0}))}),500)},showDropdown(){this.dropdownActive||(this.dropdownActive=!0,this.initialized||this.search())},clearQuery(){this.query="",this.dropdownActive=!0,this.$refs.input.focus()},outsideClickHandler(t){null===t.target.closest(`#dropdown-${this.id}`)&&(this.dropdownActive=!1)}},mounted(){window.addEventListener("click",this.outsideClickHandler)},beforeDestroy(){window.removeEventListener("click",this.outsideClickHandler)}},l=(n(7409),e(d,c,[function(){var t=this._self._c;return t("span",{staticClass:"search-btn input-group-text input-group-append-content"},[t("i",{staticClass:"fa-solid fa-magnifying-glass fa-sm"})])}],!1,null,"7deb4ea3",null).exports);const u=()=>[].forEach.call(document.querySelectorAll(".kadi-logo"),(t=>{t.style.animation="none"}));[].forEach.call(document.querySelectorAll(".kadi-logo"),(t=>{t.addEventListener("animationiteration",u),t.addEventListener("webkitAnimationIteration",u)})),window.addEventListener("invalid",(t=>kadi.utils.scrollIntoView(t.target)),!0);const p=new Vue({el:"#notification-alerts",components:{NotificationAlert:s},data:{alerts:[]},methods:{alert(t,e,n){let i=t;const o={request:null,timeout:5e3,scrollTo:!0,...n};if(null!==o.request){if(0===o.request.status)return;i=`${t} (${o.request.status})`}this.alerts.push({id:kadi.utils.randomAlnum(),message:i,type:e,timeout:o.timeout}),o.scrollTo&&kadi.utils.scrollIntoView(this.$el,"bottom")},infoAlert(t,e){this.alert(t,"info",e)},dangerAlert(t,e){this.alert(t,"danger",e)},warningAlert(t,e){this.alert(t,"warning",e)},successAlert(t,e){this.alert(t,"success",e)}}});if(kadi.alerts={info:p.infoAlert,danger:p.dangerAlert,warning:p.warningAlert,success:p.successAlert},kadi.globals.user_active){const t={H:"",R:"records",C:"collections",T:"templates",U:"users",G:"groups"};window.addEventListener("keydown",(e=>{if(!["INPUT","SELECT","TEXTAREA"].includes(e.target.tagName)&&"true"!==e.target.contentEditable&&e.shiftKey&&!e.ctrlKey&&!e.altKey&&!e.metaKey)for(const[n,i]of Object.entries(t))if(e.key===n)return e.preventDefault(),void(window.location.href=`/${i}`)})),new Vue({el:"#quick-search",components:{QuickSearch:l}}),new Vue({el:"#broadcast-message",components:{BroadcastMessage:i}});const e=new Vue({el:"#notification-toasts",components:{NotificationToast:r},data:{title:null,notifications:[],lastNotificationDate:null,notificationTimeout:5e3,pollTimeoutHandle:null},methods:{resetTimeout(){this.notificationTimeout=5e3},getNotifications(t=!1,e=!0){this.lastNotificationDate=new Date,e&&this.resetTimeout(),axios.get("/api/notifications").then((e=>{this.notifications=e.data;const n=this.notifications.length;t&&n>0&&this.$nextTick((()=>kadi.utils.scrollIntoView(this.$el,"bottom"))),document.title=n>0?`(${n}) ${this.title}`:this.title}))},beforeUnload(){window.clearTimeout(this.pollTimeoutHandle)}},mounted(){this.title=document.title;const t=()=>{this.pollTimeoutHandle=window.setTimeout(t,this.notificationTimeout),this.notificationTimeout<1e4&&(this.notificationTimeout+=1e3),(null===this.lastNotificationDate||new Date-this.lastNotificationDate>=5e3)&&this.getNotifications(!1,!1)};window.addEventListener("blur",(()=>{window.clearTimeout(this.pollTimeoutHandle)})),window.addEventListener("focus",(()=>{window.clearTimeout(this.pollTimeoutHandle),this.resetTimeout(),t()})),document.hasFocus()&&t(),window.addEventListener("beforeunload",this.beforeUnload)},beforeDestroy(){window.removeEventListener("beforeunload",this.beforeUnload)}});kadi.getNotifications=e.getNotifications}}()}();
//# sourceMappingURL=base.js.map